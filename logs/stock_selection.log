2025-08-17 17:58:38,161 - __main__ - INFO - 开始执行选股策略，目标股票数量: 15
2025-08-17 17:58:38,161 - __main__ - INFO - 开始数据可用性检查...
2025-08-17 17:58:38,486 - __main__ - ERROR - 测试数据加载失败
2025-08-17 17:58:38,486 - __main__ - ERROR - 数据源不可用，无法执行选股策略
2025-08-17 18:03:00,112 - __main__ - INFO - 开始执行选股策略，目标股票数量: 15
2025-08-17 18:03:00,112 - __main__ - INFO - 开始数据可用性检查...
2025-08-17 18:03:00,472 - __main__ - ERROR - 测试数据加载失败
2025-08-17 18:03:00,472 - __main__ - ERROR - 数据源不可用，无法执行选股策略
2025-08-17 18:03:17,453 - __main__ - INFO - 开始执行选股策略，目标股票数量: 15
2025-08-17 18:03:17,453 - __main__ - INFO - 开始数据可用性检查...
2025-08-17 18:03:17,780 - __main__ - ERROR - 测试数据加载失败
2025-08-17 18:03:17,780 - __main__ - ERROR - 数据源不可用，无法执行选股策略
2025-08-17 18:24:51,320 - __main__ - INFO - 开始执行选股策略，目标股票数量: 15
2025-08-17 18:24:51,320 - __main__ - INFO - 开始数据可用性检查...
2025-08-17 18:24:51,684 - __main__ - ERROR - 测试数据加载失败
2025-08-17 18:24:51,684 - __main__ - ERROR - 数据源不可用，无法执行选股策略
2025-08-17 18:25:03,233 - __main__ - INFO - 开始执行选股策略，目标股票数量: 15
2025-08-17 18:25:03,233 - __main__ - INFO - 开始数据可用性检查...
2025-08-17 18:25:03,573 - __main__ - ERROR - 测试数据加载失败
2025-08-17 18:25:03,573 - __main__ - ERROR - 数据源不可用，无法执行选股策略
2025-08-17 18:29:06,692 - __main__ - INFO - 开始执行选股策略，目标股票数量: 15
2025-08-17 18:29:06,693 - __main__ - INFO - 开始数据可用性检查...
2025-08-17 18:29:07,050 - __main__ - ERROR - 测试数据加载失败
2025-08-17 18:29:07,050 - __main__ - ERROR - 数据源不可用，无法执行选股策略
2025-08-17 18:31:47,966 - __main__ - INFO - 开始执行选股策略，目标股票数量: 15
2025-08-17 18:31:47,966 - __main__ - INFO - 开始数据可用性检查...
2025-08-17 18:31:48,325 - __main__ - ERROR - 测试数据加载失败
2025-08-17 18:31:48,325 - __main__ - ERROR - 数据源不可用，无法执行选股策略
2025-08-17 19:00:17,827 - __main__ - INFO - 开始执行选股策略，目标股票数量: 15
2025-08-17 19:00:17,827 - __main__ - INFO - 开始数据可用性检查...
2025-08-17 19:00:18,740 - __main__ - INFO - 数据源检查通过
2025-08-17 19:00:18,742 - __main__ - INFO - 正在获取强势指数...
2025-08-17 19:00:18,742 - __main__ - INFO - 正在获取强势指数成分股...
2025-08-17 19:00:18,742 - __main__ - INFO - 使用提供的指数列表: ['399372', '399374', '399376', '399006', '399324', '399321', '000015']
2025-08-17 19:00:18,742 - __main__ - INFO - 正在获取强势指数成分股...
2025-08-17 19:00:18,742 - __main__ - INFO - 成功获取指数399372的成分股66只
2025-08-17 19:00:18,742 - __main__ - INFO - 指数399372包含66只成分股
2025-08-17 19:00:18,743 - __main__ - INFO - 成功获取指数399374的成分股100只
2025-08-17 19:00:18,743 - __main__ - INFO - 指数399374包含100只成分股
2025-08-17 19:00:18,743 - __main__ - INFO - 成功获取指数399376的成分股166只
2025-08-17 19:00:18,743 - __main__ - INFO - 指数399376包含166只成分股
2025-08-17 19:00:18,743 - __main__ - INFO - 选股池构建完成，共包含332只股票
2025-08-17 19:00:18,743 - __main__ - INFO - 正在获取选股数据(200天)...
2025-08-17 19:00:19,383 - __main__ - INFO - 成功获取股票数据，共31338条记录
2025-08-17 19:00:19,383 - __main__ - INFO - 开始执行第一步：严格过滤空头排列和涨幅过大的股票
2025-08-17 19:00:20,123 - __main__ - INFO - 过滤后剩余股票数量: 121/236
2025-08-17 19:00:20,124 - __main__ - INFO - 开始执行第二步：对通过过滤的股票进行评分
2025-08-17 19:00:20,509 - __main__ - INFO - 
    === 选股分析报告 ===
    股票总数: 121
    平均MA60角度: 70.23°
    平均偏离度: 2.23%
    平均10日涨幅: 7.77%
    
    评分分布:
    score
58.9      2
59.5      1
61.1      1
61.5      2
61.6      1
62.4      1
64.5      1
67.1     11
67.2      1
69.8      1
70.7      1
70.8      1
71.6      3
71.7      1
72.0      1
73.5      2
74.5      1
75.0      2
75.1      1
75.3      1
76.1      7
76.1      1
76.4      1
77.2      2
77.8      1
78.0      2
79.0      4
79.1      3
79.6      1
79.8      3
80.5      1
80.6      3
81.1      1
81.6      1
81.7      6
83.1      1
83.5      1
84.3      5
86.1      3
86.7      1
88.1      1
88.5      1
89.9      1
90.0      3
90.1      2
92.7      4
92.9      2
94.0      1
95.3      1
95.5      4
97.7      1
98.2      1
100.0    15
    
    前10名股票:
    symbol  score  close     ma5  ma60_angle  ma200_angle       rsi6  deviation  ma5_slope  ma200_slope  pct_10d  low_10d
600675  100.0 115.32 115.074   57.201837    37.453074  38.125000   0.002138   0.000323     0.000380 0.035653   110.44
603565  100.0  39.72  39.854   53.038478    51.362218  49.006623   0.003362   0.001997     0.000618 0.046365    37.90
600188  100.0  68.11  68.670   60.744329    26.983771  16.129032   0.008155  -0.000850     0.000253 0.016871    66.58
600549  100.0 240.28 237.592   81.630142    69.426361  70.018975   0.011314   0.002887     0.001298 0.049120   226.75
600583  100.0 101.56 100.686   63.454906    39.599168  67.458867   0.008680   0.002447     0.000410 0.037703    97.05
600863  100.0  93.15  93.366   59.451893    39.092487  29.775281   0.002313  -0.000690     0.000403 0.000000    92.44
601225  100.0  29.93  30.002   69.643578    48.371268  32.075472   0.002400   0.001320     0.000556 0.054988    28.25
601717  100.0  44.10  44.252   78.218484    66.747638  57.657658   0.003435   0.001736     0.001137 0.045024    42.00
601857  100.0  13.19  13.230   65.804120    39.933312  45.762712   0.003023   0.000242     0.000415 0.009181    12.96
603027  100.0  76.67  75.836   64.017119    41.264960 100.000000   0.010997   0.002500     0.000435 0.015631    74.07
    
2025-08-17 19:00:20,510 - __main__ - INFO - 详细选股报告已保存至: ./data/selection_report.txt
2025-08-17 19:00:20,510 - __main__ - INFO - 选股完成，共选出15只股票
2025-08-17 19:00:20,511 - __main__ - INFO - 最终选股结果:
    symbol  score  stop_loss
60  600675  100.0     110.44
90  603565  100.0      37.90
47  600188  100.0      66.58
56  600549  100.0     226.75
58  600583  100.0      97.05
63  600863  100.0      92.44
66  601225  100.0      28.25
70  601717  100.0      42.00
72  601857  100.0      12.96
78  603027  100.0      74.07
17  300498  100.0      37.37
74  601919  100.0      28.96
43  600098  100.0      29.65
94  603868  100.0      49.88
11  300373  100.0     283.90
2025-08-17 19:00:20,514 - __main__ - INFO - 选股结果已保存到: ./data/selected_stocks.csv
2025-08-18 23:13:16,784 - __main__ - INFO - 开始执行选股策略，目标股票数量: 15
2025-08-18 23:13:16,784 - __main__ - INFO - 开始数据可用性检查...
2025-08-18 23:13:17,777 - __main__ - INFO - 数据源检查通过
2025-08-18 23:13:17,778 - __main__ - INFO - 正在获取强势指数...
2025-08-18 23:13:17,778 - __main__ - INFO - 正在获取强势指数成分股...
2025-08-18 23:13:17,778 - __main__ - INFO - 使用提供的指数列表: ['399372', '399374', '399376', '399006', '399324', '399321', '000015']
2025-08-18 23:13:17,778 - __main__ - INFO - 正在获取强势指数成分股...
2025-08-18 23:13:17,779 - __main__ - INFO - 成功获取指数399372的成分股66只
2025-08-18 23:13:17,779 - __main__ - INFO - 指数399372包含66只成分股
2025-08-18 23:13:17,779 - __main__ - INFO - 成功获取指数399374的成分股100只
2025-08-18 23:13:17,779 - __main__ - INFO - 指数399374包含100只成分股
2025-08-18 23:13:17,780 - __main__ - INFO - 成功获取指数399376的成分股166只
2025-08-18 23:13:17,780 - __main__ - INFO - 指数399376包含166只成分股
2025-08-18 23:13:17,780 - __main__ - INFO - 选股池构建完成，共包含332只股票
2025-08-18 23:13:17,780 - __main__ - INFO - 正在获取选股数据(200天)...
2025-08-18 23:13:18,448 - __main__ - INFO - 成功获取股票数据，共31573条记录
2025-08-18 23:13:18,448 - __main__ - INFO - 开始执行第一步：严格过滤空头排列和涨幅过大的股票
2025-08-18 23:13:19,210 - __main__ - INFO - 过滤后剩余股票数量: 128/236
2025-08-18 23:13:19,211 - __main__ - INFO - 开始执行第二步：对通过过滤的股票进行评分
2025-08-18 23:13:19,611 - __main__ - INFO - 
    === 选股分析报告 ===
    股票总数: 128
    平均MA60角度: 70.69°
    平均偏离度: 2.77%
    平均10日涨幅: 8.06%
    
    评分分布:
    score
60.6      1
61.5      4
63.4      1
64.5      1
66.9      1
67.1     17
67.9      1
68.4      1
69.0      2
70.7      1
71.6      6
72.4      1
73.0      1
73.1      1
73.4      1
73.5      1
74.3      1
74.5      3
75.0      1
76.1      7
76.4      2
77.2      2
77.9      1
78.0      2
79.0      4
79.1      1
79.6      1
79.8      1
80.6      1
81.6      3
81.7      4
83.1      1
83.5      5
84.3      4
84.4      1
86.0      1
86.1      3
86.4      1
86.7      2
88.6      1
89.0      1
90.0      4
90.1      1
92.7      6
94.0      1
95.3      3
95.5      1
95.6      2
96.7      1
97.7      1
98.1      1
98.2      1
100.0    11
    
    前10名股票:
    symbol  score  close     ma5  ma60_angle  ma200_angle       rsi6  deviation  ma5_slope  ma200_slope   pct_10d  low_10d
600873  100.0  66.70  66.536   52.007576    45.411645  47.787611   0.002465  -0.000355     0.000502 -0.010092    65.84
300373  100.0 306.85 304.180   79.034825    69.259269  62.179487   0.008778   0.002650     0.001286  0.065451   286.70
600863  100.0  93.15  93.294   58.982405    38.034038  12.587413   0.001544  -0.000999     0.000388  0.001828    92.80
600803  100.0 123.68 124.340   10.563555    16.158024  41.512915   0.005308   0.000428     0.000144  0.005937   121.97
600583  100.0  99.65 100.824   63.510328    39.179770  44.925373   0.011644   0.001900     0.000404  0.018187    97.87
603027  100.0  77.24  76.254   65.221636    42.502810 100.000000   0.012930   0.003341     0.000454  0.030141    74.07
600361  100.0  20.63  20.456   64.847802    31.979700  69.590643   0.008506   0.002835     0.000310  0.035643    19.86
600098  100.0  30.67  30.530   49.078771    33.891525  48.484848   0.004586   0.000603     0.000334  0.024724    29.83
603565  100.0  39.44  39.826   52.052887    51.384610  41.340782   0.009692   0.000683     0.000618  0.032731    38.19
603868  100.0  52.75  52.320   62.045963    36.455073  73.399015   0.008219   0.001697     0.000367  0.041461    50.55
    
2025-08-18 23:13:19,612 - __main__ - INFO - 详细选股报告已保存至: ./data/selection_report.txt
2025-08-18 23:13:19,612 - __main__ - INFO - 选股完成，共选出15只股票
2025-08-18 23:13:19,614 - __main__ - INFO - 最终选股结果:
    symbol  score  stop_loss
64  600873  100.0      65.84
11  300373  100.0     286.70
63  600863  100.0      92.80
62  600803  100.0     121.97
60  600583  100.0      97.87
78  603027  100.0      74.07
49  600361  100.0      19.86
44  600098  100.0      29.83
90  603565  100.0      38.19
95  603868  100.0      50.55
73  601857  100.0      13.01
76  601969   98.2       8.35
71  601717   98.1      43.06
67  601198   97.7      12.78
3   300015   96.7     805.94
2025-08-18 23:13:19,616 - __main__ - INFO - 选股结果已保存到: ./data/selected_stocks.csv
2025-08-19 19:56:28,889 - INFO - 未提供选股日期，使用当前日期: 2025-08-19
2025-08-19 19:56:28,889 - INFO - 开始执行选股策略，目标股票数量: 15
2025-08-19 19:56:28,889 - INFO - 开始数据可用性检查...
2025-08-19 19:56:28,889 - INFO - === 策略数据验证 ===
2025-08-19 19:56:28,889 - INFO - === 数据文件完整性检查 ===
2025-08-19 19:56:28,889 - ERROR - 错误: 价格数据文件 ./data/prices.csv 不存在
2025-08-19 19:56:28,889 - ERROR - 数据验证失败
2025-08-19 19:56:28,889 - ERROR - 数据源不可用，无法执行选股策略
2025-08-19 19:56:56,611 - INFO - 未提供选股日期，使用当前日期: 2025-08-19
2025-08-19 19:56:56,611 - INFO - 开始执行选股策略，目标股票数量: 15
2025-08-19 19:56:56,611 - INFO - 开始数据可用性检查...
2025-08-19 19:56:56,612 - INFO - === 策略数据验证 ===
2025-08-19 19:56:56,612 - INFO - === 数据文件完整性检查 ===
2025-08-19 19:56:56,612 - ERROR - 错误: 价格数据文件 ./data/prices.csv 不存在
2025-08-19 19:56:56,612 - ERROR - 数据验证失败
2025-08-19 19:56:56,612 - ERROR - 数据源不可用，无法执行选股策略
2025-08-19 19:57:04,922 - INFO - 未提供选股日期，使用当前日期: 2025-08-19
2025-08-19 19:57:04,922 - INFO - 开始执行选股策略，目标股票数量: 15
2025-08-19 19:57:04,922 - INFO - 开始数据可用性检查...
2025-08-19 19:57:04,922 - INFO - === 策略数据验证 ===
2025-08-19 19:57:04,922 - INFO - === 数据文件完整性检查 ===
2025-08-19 19:57:04,922 - ERROR - 错误: 价格数据文件 ./data/prices.csv 不存在
2025-08-19 19:57:04,922 - ERROR - 数据验证失败
2025-08-19 19:57:04,922 - ERROR - 数据源不可用，无法执行选股策略
2025-08-19 20:22:40,230 - INFO - 未提供选股日期，使用当前日期: 2025-08-19
2025-08-19 20:22:40,230 - INFO - 开始执行选股策略，目标股票数量: 15
2025-08-19 20:22:40,230 - INFO - 开始数据可用性检查...
2025-08-19 20:22:40,230 - INFO - === 策略数据验证 ===
2025-08-19 20:22:40,230 - INFO - === 数据文件完整性检查 ===
2025-08-19 20:22:40,230 - INFO - ✓ 价格数据文件存在: ./data/prices.csv
2025-08-19 20:22:40,230 - INFO - ✓ 成分股文件存在: ./data/constituents.csv
2025-08-19 20:22:40,230 - INFO - === 价格数据验证 ===
2025-08-19 20:22:40,230 - INFO - 正在读取价格数据...
2025-08-19 20:22:40,510 - INFO - ✓ 成功读取价格数据，共 1305091 行
2025-08-19 20:22:40,511 - INFO - ✓ 所有必需列都存在
2025-08-19 20:22:40,588 - INFO - ✓ 日期范围: 2010-01-01 至 2025-08-18
2025-08-19 20:22:40,591 - INFO - ✓ 唯一股票代码数量: 484
2025-08-19 20:22:40,595 - WARNING - 警告: 以下列存在空值:
2025-08-19 20:22:40,595 - WARNING -   open: 1 个空值
2025-08-19 20:22:40,595 - WARNING -   high: 1 个空值
2025-08-19 20:22:40,595 - WARNING -   low: 1 个空值
2025-08-19 20:22:40,596 - INFO - === 成分股数据验证 ===
2025-08-19 20:22:40,596 - INFO - 找到 7 个成分股文件
2025-08-19 20:22:40,597 - INFO -   constituents_399376.csv: 166 只股票
2025-08-19 20:22:40,597 - INFO -   constituents_399374.csv: 100 只股票
2025-08-19 20:22:40,598 - INFO -   constituents_399006.csv: 100 只股票
2025-08-19 20:22:40,598 - INFO -   constituents_399372.csv: 66 只股票
2025-08-19 20:22:40,599 - INFO -   constituents_000015.csv: 50 只股票
2025-08-19 20:22:40,599 - INFO -   constituents_399321.csv: 50 只股票
2025-08-19 20:22:40,600 - INFO -   constituents_399324.csv: 40 只股票
2025-08-19 20:22:40,600 - INFO - ✓ 成分股数据总览: 7 个指数，共 572 只股票
2025-08-19 20:22:40,600 - INFO - ✓ 所有数据验证通过，可以执行策略
2025-08-19 20:22:40,600 - INFO - 加载5天测试数据以验证数据源...
2025-08-19 20:22:40,600 - INFO - 开始读取数据文件...
2025-08-19 20:22:40,908 - INFO - 成功读取数据文件，共 1305091 行数据
2025-08-19 20:22:40,915 - INFO - 原始数据日期范围: 2010-01-01 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:22:41,181 - INFO - 未指定特定股票代码，返回所有数据
2025-08-19 20:22:41,182 - INFO - 请求的结束日期 2025-08-19 超出实际数据范围，调整为实际最新日期: 2025-08-18
2025-08-19 20:22:41,203 - INFO - 过滤前数据量: 1305091
2025-08-19 20:22:41,203 - INFO - 请求的日期范围: 2025-08-14 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:22:41,204 - INFO - 实际数据日期范围: 2010-01-01 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:22:41,206 - INFO - 日期范围有重叠，进行过滤
2025-08-19 20:22:41,211 - INFO - 根据日期范围 2025-08-14 至 2025-08-18 过滤后剩余 1447 行数据
2025-08-19 20:22:41,223 - INFO - 最终返回数据: 1447 行, 483 只股票
2025-08-19 20:22:41,229 - INFO - 成功加载测试数据，共1447条记录
2025-08-19 20:22:41,229 - INFO - 数据源检查通过
2025-08-19 20:22:41,230 - INFO - 正在获取强势指数...
2025-08-19 20:22:41,230 - INFO - 正在获取短期强势指数...
2025-08-19 20:22:41,230 - INFO - 基于选股日期计算短期强势指数: 2025-08-19
2025-08-19 20:22:41,230 - INFO - 请求指数数据日期范围: 2025-08-04 至 2025-08-19
2025-08-19 20:22:41,230 - INFO - 请求的指数列表: ['399372', '399374', '399376', '399006', '399324', '399321', '000015']
2025-08-19 20:22:41,230 - INFO - 请求列表中包含000015指数
2025-08-19 20:22:41,230 - INFO - 开始读取数据文件...
2025-08-19 20:22:41,537 - INFO - 成功读取数据文件，共 1305091 行数据
2025-08-19 20:22:41,541 - INFO - 原始数据日期范围: 2010-01-01 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:22:41,805 - INFO - 请求的指数代码: ['399372', '399374', '399376', '399006', '399324', '399321', '000015']
2025-08-19 20:22:41,805 - INFO - 请求的股票代码: []
2025-08-19 20:22:41,805 - INFO - 请求列表中包含000015指数
2025-08-19 20:22:41,825 - INFO - 通过symbol列匹配到 21318 行指数数据
2025-08-19 20:22:41,850 - INFO - 通过symbol列匹配到000015指数 0 行数据
2025-08-19 20:22:41,853 - INFO - 合并后的数据总行数: 21318
2025-08-19 20:22:41,853 - INFO - 指数和股票代码过滤完成，剩余 21318 行数据
2025-08-19 20:22:41,854 - INFO - 请求的结束日期 2025-08-19 超出实际数据范围，调整为实际最新日期: 2025-08-18
2025-08-19 20:22:41,863 - INFO - 过滤前数据量: 21318
2025-08-19 20:22:41,863 - INFO - 请求的日期范围: 2025-08-04 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:22:41,863 - INFO - 实际数据日期范围: 2011-01-04 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:22:41,863 - INFO - 日期范围有重叠，进行过滤
2025-08-19 20:22:41,863 - INFO - 根据日期范围 2025-08-04 至 2025-08-18 过滤后剩余 66 行数据
2025-08-19 20:22:41,864 - INFO - 最终返回数据: 66 行, 6 只股票
2025-08-19 20:22:41,865 - INFO - 从数据源获取到的指数数据: 66 条记录
2025-08-19 20:22:41,865 - INFO - 获取到的指数数量: 6
2025-08-19 20:22:41,865 - INFO - 获取到的指数代码: ['399006', '399321', '399324', '399372', '399374', '399376']
2025-08-19 20:22:41,865 - INFO - 000015指数的数据条数: 0
2025-08-19 20:22:41,865 - INFO - 指数 399372 的数据条数: 11
2025-08-19 20:22:41,865 - INFO - 指数 399372 的最新数据日期: 2025-08-18 00:00:00
2025-08-19 20:22:41,865 - INFO - 指数 399374 的数据条数: 11
2025-08-19 20:22:41,865 - INFO - 指数 399374 的最新数据日期: 2025-08-18 00:00:00
2025-08-19 20:22:41,865 - INFO - 指数 399376 的数据条数: 11
2025-08-19 20:22:41,865 - INFO - 指数 399376 的最新数据日期: 2025-08-18 00:00:00
2025-08-19 20:22:41,866 - INFO - 指数 399006 的数据条数: 11
2025-08-19 20:22:41,866 - INFO - 指数 399006 的最新数据日期: 2025-08-18 00:00:00
2025-08-19 20:22:41,866 - INFO - 指数 399324 的数据条数: 11
2025-08-19 20:22:41,866 - INFO - 指数 399324 的最新数据日期: 2025-08-18 00:00:00
2025-08-19 20:22:41,866 - INFO - 指数 399321 的数据条数: 11
2025-08-19 20:22:41,866 - INFO - 指数 399321 的最新数据日期: 2025-08-18 00:00:00
2025-08-19 20:22:41,866 - INFO - 指数 000015 的数据条数: 0
2025-08-19 20:22:41,866 - WARNING - 指数 000015 没有匹配到任何数据
2025-08-19 20:22:41,866 - INFO - 指数 399372 的数据条数: 11
2025-08-19 20:22:41,866 - INFO - 指数 399372 最近5日收盘价: [4239.1, 4311.24, 4308.49, 4336.89, 4372.58]
2025-08-19 20:22:41,866 - INFO - 指数 399372 的RSI5值: 94.28986710963453
2025-08-19 20:22:41,867 - INFO - 指数 399374 的数据条数: 11
2025-08-19 20:22:41,867 - INFO - 指数 399374 最近5日收盘价: [3719.8, 3750.33, 3708.98, 3774.22, 3825.42]
2025-08-19 20:22:41,867 - INFO - 指数 399374 的RSI5值: 54.22847022359976
2025-08-19 20:22:41,867 - INFO - 指数 399376 的数据条数: 11
2025-08-19 20:22:41,867 - INFO - 指数 399376 最近5日收盘价: [5192.73, 5274.41, 5218.7, 5353.86, 5459.3]
2025-08-19 20:22:41,867 - INFO - 指数 399376 的RSI5值: 65.85071821172434
2025-08-19 20:22:41,867 - INFO - 指数 399006 的数据条数: 11
2025-08-19 20:22:41,867 - INFO - 指数 399006 最近5日收盘价: [2409.4, 2496.5, 2469.66, 2534.22, 2606.2]
2025-08-19 20:22:41,867 - INFO - 指数 399006 的RSI5值: 73.52709100473423
2025-08-19 20:22:41,867 - INFO - 指数 399324 的数据条数: 11
2025-08-19 20:22:41,868 - INFO - 指数 399324 最近5日收盘价: [8834.95, 8859.45, 8824.24, 8868.59, 8864.9]
2025-08-19 20:22:41,868 - INFO - 指数 399324 的RSI5值: 63.897911832945894
2025-08-19 20:22:41,868 - INFO - 指数 399321 的数据条数: 11
2025-08-19 20:22:41,868 - INFO - 指数 399321 最近5日收盘价: [7667.86, 7638.14, 7663.04, 7638.73, 7647.05]
2025-08-19 20:22:41,868 - INFO - 指数 399321 的RSI5值: 38.07449856733553
2025-08-19 20:22:41,868 - INFO - 指数 000015 的数据条数: 0
2025-08-19 20:22:41,868 - WARNING - 指数 000015 数据不足，仅 0 条记录
2025-08-19 20:22:41,868 - INFO - 基于RSI5计算的强势指数: ['399372', '399006', '399376']
2025-08-19 20:22:41,868 - INFO - 各指数RSI5值: [('399372', np.float64(94.28986710963453)), ('399006', np.float64(73.52709100473423)), ('399376', np.float64(65.85071821172434))]
2025-08-19 20:22:41,868 - INFO - 正在获取强势指数成分股...
2025-08-19 20:22:41,869 - INFO - 从constituents_399372.csv获取到指数399372的成分股66只
2025-08-19 20:22:41,869 - INFO - 从数据源获取到指数399372的成分股数量: 66
2025-08-19 20:22:41,869 - INFO - 成功获取指数399372的成分股66只
2025-08-19 20:22:41,869 - INFO - 指数399372包含66只成分股
2025-08-19 20:22:41,869 - INFO - 从constituents_399006.csv获取到指数399006的成分股100只
2025-08-19 20:22:41,869 - INFO - 从数据源获取到指数399006的成分股数量: 100
2025-08-19 20:22:41,869 - INFO - 成功获取指数399006的成分股100只
2025-08-19 20:22:41,869 - INFO - 指数399006包含100只成分股
2025-08-19 20:22:41,870 - INFO - 从constituents_399376.csv获取到指数399376的成分股166只
2025-08-19 20:22:41,870 - INFO - 从数据源获取到指数399376的成分股数量: 166
2025-08-19 20:22:41,870 - INFO - 成功获取指数399376的成分股166只
2025-08-19 20:22:41,870 - INFO - 指数399376包含166只成分股
2025-08-19 20:22:41,870 - INFO - 选股池构建完成，共包含301只股票
2025-08-19 20:22:41,870 - INFO - 正在获取选股数据(200天)...
2025-08-19 20:22:41,870 - INFO - 开始读取数据文件...
2025-08-19 20:22:42,176 - INFO - 成功读取数据文件，共 1305091 行数据
2025-08-19 20:22:42,180 - INFO - 原始数据日期范围: 2010-01-01 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:22:42,443 - INFO - 请求的指数代码: []
2025-08-19 20:22:42,443 - INFO - 请求的股票代码: ['000100', '600438', '300763', '002831', '688032', '605111', '603129', '000032', '300251', '605296', '300595', '600011', '601127', '300058', '300274', '000543', '600760', '600188', '300015', '300059', '300390', '002056', '601717', '600009', '603501', '002850', '300347', '688111', '300122', '688520', '300408', '300751', '300573', '001203', '600707', '600737', '601600', '603871', '688002', '001389', '300672', '601702', '600519', '300212', '601857', '002518', '300502', '300957', '835185', '603688', '688037', '002131', '300832', '688295', '300146', '300888', '300776', '603613', '603317', '300724', '000997', '601816', '300628', '300487', '301236', '301589', '300679', '688361', '002266', '002460', '300627', '832982', '600547', '600392', '300012', '300002', '301301', '600021', '600809', '002244', '300442', '600905', '300454', '300496', '002837', '000966', '600023', '300750', '300118', '301611', '600329', '600872', '300896', '002472', '002429', '600032', '002597', '002978', '603305', '300432', '300070', '300567', '300009', '600499', '300373', '300024', '603707', '300001', '000737', '300760', '688012', '002906', '603025', '300457', '688778', '300765', '300782', '301165', '002240', '002179', '688008', '300073', '600141', '601225', '300568', '300661', '600702', '300699', '603056', '300017', '300383', '600623', '603868', '300777', '600685', '300677', '688281', '601919', '688018', '600436', '300633', '600312', '603565', '688582', '002050', '688153', '300142', '002756', '688050', '600089', '688100', '688516', '300450', '301358', '300779', '605499', '000034', '688036', '002432', '002867', '300054', '301035', '300476', '600660', '688271', '300775', '300418', '600933', '000426', '300748', '000830', '002311', '000403', '000858', '688041', '002312', '300623', '603027', '688278', '601899', '603236', '002497', '002714', '300558', '600583', '002249', '300395', '300014', '000625', '300223', '300857', '002594', '600171', '300285', '302132', '603290', '002506', '300458', '002541', '300433', '688052', '300979', '688676', '601336', '300124', '000893', '603993', '601689', '002176', '300346', '300003', '002371', '600361', '300866', '300999', '300601', '300498', '000301', '000792', '300803', '000878', '002320', '001308', '301308', '605090', '600938', '003031', '002865', '300298', '300115', '300759', '300136', '002773', '688301', '300529', '600977', '600675', '603179', '002607', '600456', '000683', '600578', '000596', '300253', '603444', '301536', '002484', '601633', '603195', '688506', '300308', '603456', '688385', '300394', '002155', '600563', '601918', '300735', '688200', '300207', '300413', '300316', '300033', '688981', '300037', '300604', '300761', '600150', '300666', '601969', '603225', '603259', '600795', '600779', '300676', '002475', '301029', '300474', '301498', '301015', '688005', '300144', '300339', '603786', '301269', '688183', '000568', '300919', '002468', '600098', '688248', '002318', '002690', '688568', '002572', '002463', '603556', '301267', '002984', '688223', '002402']
2025-08-19 20:22:42,475 - INFO - 匹配到 535043 行股票数据
2025-08-19 20:22:42,478 - INFO - 合并后的数据总行数: 535043
2025-08-19 20:22:42,478 - INFO - 指数和股票代码过滤完成，剩余 535043 行数据
2025-08-19 20:22:42,479 - INFO - 请求的结束日期 2025-08-19 超出实际数据范围，调整为实际最新日期: 2025-08-18
2025-08-19 20:22:42,486 - INFO - 过滤前数据量: 535043
2025-08-19 20:22:42,486 - INFO - 请求的日期范围: 2025-01-31 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:22:42,488 - INFO - 实际数据日期范围: 2010-01-04 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:22:42,488 - INFO - 日期范围有重叠，进行过滤
2025-08-19 20:22:42,490 - INFO - 根据日期范围 2025-01-31 至 2025-08-18 过滤后剩余 31309 行数据
2025-08-19 20:22:42,496 - INFO - 最终返回数据: 31309 行, 234 只股票
2025-08-19 20:22:42,499 - INFO - 成功获取股票数据，共31309条记录
2025-08-19 20:22:42,499 - INFO - 开始执行第一步：适度过滤明显不符合条件的股票
2025-08-19 20:22:43,288 - INFO - 过滤后剩余股票数量: 182/234
2025-08-19 20:22:43,290 - INFO - 开始执行第二步：对通过过滤的股票进行评分
2025-08-19 20:22:43,453 - INFO - 股票300498处于超卖区域，RSI: 22.727272727273046, 威廉指标: -81.30081300812981，降低评分
2025-08-19 20:22:43,577 - INFO - 股票300979处于超卖区域，RSI: 24.000000000000213, 威廉指标: -83.29764453961455，降低评分
2025-08-19 20:22:43,624 - INFO - 股票600023处于超卖区域，RSI: 26.315789473684404, 威廉指标: -64.70588235294088，降低评分
2025-08-19 20:22:43,646 - INFO - 股票600188处于超卖区域，RSI: 16.949152542372616, 威廉指标: -62.98342541436459，降低评分
2025-08-19 20:22:43,693 - INFO - 股票600795处于超卖区域，RSI: 6.250000000000114, 威廉指标: -95.99999999999991，降低评分
2025-08-19 20:22:43,696 - INFO - 股票600905处于超卖区域，RSI: 33.333333333332845, 威廉指标: -85.71428571428599，降低评分
2025-08-19 20:22:43,703 - INFO - 股票600938处于超卖区域，RSI: 17.99999999999997, 威廉指标: -100.0，降低评分
2025-08-19 20:22:43,709 - INFO - 股票601225处于超卖区域，RSI: 21.126760563380174, 威廉指标: -48.59437751004008，降低评分
2025-08-19 20:22:43,736 - INFO - 股票601919处于超卖区域，RSI: 0.0, 威廉指标: -86.11111111111121，降低评分
2025-08-19 20:22:43,891 - INFO - 
    === 选股分析报告 ===
    股票总数: 182
    平均MA60角度: 62.77°
    平均偏离度: 2.91%
    平均10日涨幅: 7.87%
    
    仓位配置建议:
    强势区股票(59只): 建议配置60%资金
    中性区股票(80只): 建议配置30%资金
    弱势区股票(43只): 建议保留10%现金
    
    评分分布:
    score
17.5     1
20.0     8
22.5     1
30.0     3
40.0    28
45.0     2
50.0    19
55.0     3
60.0    24
65.0    11
70.0    23
75.0    10
80.0    21
85.0    12
90.0    15
95.0     1
    
    前10名股票:
    symbol  score  close     ma5  ma60_angle  ma200_angle      rsi6  deviation  ma5_slope  ma200_slope  pct_10d  low_10d
301358   95.0  35.81  35.484   71.345972   -23.144241 75.365854   0.009187   0.012152    -0.000215 0.124686    31.58
301589   90.0 294.11 290.908   71.018945     7.311837 66.514806   0.011007  -0.000961     0.000064 0.010201   284.10
688005   90.0  35.07  34.848   76.092868    30.587735 59.829060   0.006371   0.002433     0.000294 0.080740    32.60
601969   90.0   8.69   8.608   77.705861    64.078357 65.714286   0.009526   0.001301     0.001008 0.029621     8.35
300373   90.0 306.85 304.180   79.034825    69.259269 62.179487   0.008778   0.002650     0.001286 0.065451   286.70
601899   90.0  34.47  34.646   76.980244    63.046810 57.142857   0.005080   0.005253     0.000964 0.041704    32.93
605090   90.0  45.79  45.654   77.587642    59.493761 67.013889   0.002979   0.006089     0.000834 0.051435    43.10
601600   90.0   8.47   8.480   78.597114    49.556436 60.227273   0.001179   0.005755     0.000580 0.052174     8.01
300957   90.0  48.94  48.408   64.497423    32.607661 62.247839   0.010990  -0.000397     0.000318 0.021499    47.43
688032   90.0 381.97 377.608   70.315804    34.037796 68.233126   0.011552   0.003609     0.000335 0.040762   361.09
    
2025-08-19 20:22:43,892 - INFO - 详细选股报告已保存至: ./data/selection_report.txt
2025-08-19 20:22:43,892 - INFO - 选股完成，共选出15只股票
2025-08-19 20:22:43,894 - INFO - 最终选股结果:
     symbol  score  stop_loss
95   301358   95.0      31.58
97   301589   90.0     284.10
159  688005   90.0      32.60
136  601969   90.0       8.35
33   300373   90.0     286.70
134  601899   90.0      32.93
157  605090   90.0      43.10
129  601600   90.0       8.01
86   300957   90.0      47.43
163  688032   90.0     361.09
90   301035   90.0      68.89
77   300776   90.0     270.87
36   300394   90.0     887.47
62   300633   90.0      32.90
3    300009   90.0     200.08
2025-08-19 20:22:43,897 - INFO - 选股结果已保存到: ./data/selected_stocks.csv
2025-08-19 20:37:34,438 - INFO - 未提供选股日期，使用当前日期: 2025-08-19
2025-08-19 20:37:34,438 - INFO - 开始执行选股策略，目标股票数量: 15
2025-08-19 20:37:34,438 - INFO - 开始数据可用性检查...
2025-08-19 20:37:34,438 - INFO - === 策略数据验证 ===
2025-08-19 20:37:34,438 - INFO - === 数据文件完整性检查 ===
2025-08-19 20:37:34,438 - INFO - ✓ 价格数据文件存在: ./data/prices.csv
2025-08-19 20:37:34,438 - INFO - ✓ 成分股文件存在: ./data/constituents.csv
2025-08-19 20:37:34,438 - INFO - === 价格数据验证 ===
2025-08-19 20:37:34,438 - INFO - 正在读取价格数据...
2025-08-19 20:37:34,706 - INFO - ✓ 成功读取价格数据，共 1305091 行
2025-08-19 20:37:34,707 - INFO - ✓ 所有必需列都存在
2025-08-19 20:37:34,786 - INFO - ✓ 日期范围: 2010-01-01 至 2025-08-18
2025-08-19 20:37:34,790 - INFO - ✓ 唯一股票代码数量: 484
2025-08-19 20:37:34,795 - WARNING - 警告: 以下列存在空值:
2025-08-19 20:37:34,795 - WARNING -   open: 1 个空值
2025-08-19 20:37:34,795 - WARNING -   high: 1 个空值
2025-08-19 20:37:34,795 - WARNING -   low: 1 个空值
2025-08-19 20:37:34,796 - INFO - === 成分股数据验证 ===
2025-08-19 20:37:34,796 - INFO - 找到 7 个成分股文件
2025-08-19 20:37:34,797 - INFO -   constituents_399376.csv: 166 只股票
2025-08-19 20:37:34,798 - INFO -   constituents_399374.csv: 100 只股票
2025-08-19 20:37:34,798 - INFO -   constituents_399006.csv: 100 只股票
2025-08-19 20:37:34,799 - INFO -   constituents_399372.csv: 66 只股票
2025-08-19 20:37:34,799 - INFO -   constituents_000015.csv: 50 只股票
2025-08-19 20:37:34,799 - INFO -   constituents_399321.csv: 50 只股票
2025-08-19 20:37:34,800 - INFO -   constituents_399324.csv: 40 只股票
2025-08-19 20:37:34,800 - INFO - ✓ 成分股数据总览: 7 个指数，共 572 只股票
2025-08-19 20:37:34,800 - INFO - ✓ 所有数据验证通过，可以执行策略
2025-08-19 20:37:34,800 - INFO - 加载5天测试数据以验证数据源...
2025-08-19 20:37:34,800 - INFO - 开始读取数据文件...
2025-08-19 20:37:35,108 - INFO - 成功读取数据文件，共 1305091 行数据
2025-08-19 20:37:35,113 - INFO - 原始数据日期范围: 2010-01-01 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:37:35,347 - INFO - 未指定特定股票代码，返回所有数据
2025-08-19 20:37:35,348 - INFO - 请求的结束日期 2025-08-19 超出实际数据范围，调整为实际最新日期: 2025-08-18
2025-08-19 20:37:35,354 - INFO - 过滤前数据量: 1305091
2025-08-19 20:37:35,354 - INFO - 请求的日期范围: 2025-08-14 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:37:35,355 - INFO - 实际数据日期范围: 2010-01-01 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:37:35,357 - INFO - 日期范围有重叠，进行过滤
2025-08-19 20:37:35,363 - INFO - 根据日期范围 2025-08-14 至 2025-08-18 过滤后剩余 1447 行数据
2025-08-19 20:37:35,371 - INFO - 最终返回数据: 1447 行, 483 只股票
2025-08-19 20:37:35,378 - INFO - 成功加载测试数据，共1447条记录
2025-08-19 20:37:35,378 - INFO - 数据源检查通过
2025-08-19 20:37:35,379 - INFO - 正在获取强势指数...
2025-08-19 20:37:35,379 - INFO - 正在获取短期强势指数...
2025-08-19 20:37:35,379 - INFO - 基于选股日期计算短期强势指数: 2025-08-19
2025-08-19 20:37:35,379 - INFO - 请求指数数据日期范围: 2025-08-04 至 2025-08-19
2025-08-19 20:37:35,379 - INFO - 请求的指数列表: ['399372', '399374', '399376', '399006', '399324', '399321', '000015']
2025-08-19 20:37:35,379 - INFO - 请求列表中包含000015指数
2025-08-19 20:37:35,379 - INFO - 开始读取数据文件...
2025-08-19 20:37:35,688 - INFO - 成功读取数据文件，共 1305091 行数据
2025-08-19 20:37:35,694 - INFO - 原始数据日期范围: 2010-01-01 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:37:35,929 - INFO - 请求的指数代码: ['399372', '399374', '399376', '399006', '399324', '399321', '000015']
2025-08-19 20:37:35,929 - INFO - 请求的股票代码: []
2025-08-19 20:37:35,929 - INFO - 请求列表中包含000015指数
2025-08-19 20:37:36,055 - INFO - 通过symbol列匹配到 21318 行其他指数数据
2025-08-19 20:37:36,056 - INFO - 合并后的数据总行数: 21318
2025-08-19 20:37:36,056 - INFO - 指数和股票代码过滤完成，剩余 21318 行数据
2025-08-19 20:37:36,057 - INFO - 请求的结束日期 2025-08-19 超出实际数据范围，调整为实际最新日期: 2025-08-18
2025-08-19 20:37:36,067 - INFO - 过滤前数据量: 21318
2025-08-19 20:37:36,067 - INFO - 请求的日期范围: 2025-08-04 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:37:36,067 - INFO - 实际数据日期范围: 2011-01-04 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:37:36,067 - INFO - 日期范围有重叠，进行过滤
2025-08-19 20:37:36,067 - INFO - 根据日期范围 2025-08-04 至 2025-08-18 过滤后剩余 66 行数据
2025-08-19 20:37:36,068 - INFO - 最终返回数据: 66 行, 6 只股票
2025-08-19 20:37:36,068 - INFO - 从数据源获取到的指数数据: 66 条记录
2025-08-19 20:37:36,068 - INFO - 获取到的指数数量: 6
2025-08-19 20:37:36,068 - INFO - 获取到的指数代码: ['399006', '399321', '399324', '399372', '399374', '399376']
2025-08-19 20:37:36,068 - INFO - 000015指数的数据条数: 0
2025-08-19 20:37:36,069 - INFO - 指数 399372 的数据条数: 11
2025-08-19 20:37:36,069 - INFO - 指数 399372 的最新数据日期: 2025-08-18 00:00:00
2025-08-19 20:37:36,069 - INFO - 指数 399374 的数据条数: 11
2025-08-19 20:37:36,069 - INFO - 指数 399374 的最新数据日期: 2025-08-18 00:00:00
2025-08-19 20:37:36,069 - INFO - 指数 399376 的数据条数: 11
2025-08-19 20:37:36,069 - INFO - 指数 399376 的最新数据日期: 2025-08-18 00:00:00
2025-08-19 20:37:36,069 - INFO - 指数 399006 的数据条数: 11
2025-08-19 20:37:36,069 - INFO - 指数 399006 的最新数据日期: 2025-08-18 00:00:00
2025-08-19 20:37:36,069 - INFO - 指数 399324 的数据条数: 11
2025-08-19 20:37:36,069 - INFO - 指数 399324 的最新数据日期: 2025-08-18 00:00:00
2025-08-19 20:37:36,069 - INFO - 指数 399321 的数据条数: 11
2025-08-19 20:37:36,069 - INFO - 指数 399321 的最新数据日期: 2025-08-18 00:00:00
2025-08-19 20:37:36,069 - INFO - 指数 000015 的数据条数: 0
2025-08-19 20:37:36,069 - WARNING - 指数 000015 没有匹配到任何数据
2025-08-19 20:37:36,070 - INFO - 指数 399372 的数据条数: 11
2025-08-19 20:37:36,070 - INFO - 指数 399372 最近5日收盘价: [4239.1, 4311.24, 4308.49, 4336.89, 4372.58]
2025-08-19 20:37:36,070 - INFO - 指数 399372 的RSI5值: 94.28986710963453
2025-08-19 20:37:36,070 - INFO - 指数 399374 的数据条数: 11
2025-08-19 20:37:36,070 - INFO - 指数 399374 最近5日收盘价: [3719.8, 3750.33, 3708.98, 3774.22, 3825.42]
2025-08-19 20:37:36,070 - INFO - 指数 399374 的RSI5值: 54.22847022359976
2025-08-19 20:37:36,070 - INFO - 指数 399376 的数据条数: 11
2025-08-19 20:37:36,070 - INFO - 指数 399376 最近5日收盘价: [5192.73, 5274.41, 5218.7, 5353.86, 5459.3]
2025-08-19 20:37:36,070 - INFO - 指数 399376 的RSI5值: 65.85071821172434
2025-08-19 20:37:36,070 - INFO - 指数 399006 的数据条数: 11
2025-08-19 20:37:36,070 - INFO - 指数 399006 最近5日收盘价: [2409.4, 2496.5, 2469.66, 2534.22, 2606.2]
2025-08-19 20:37:36,070 - INFO - 指数 399006 的RSI5值: 73.52709100473423
2025-08-19 20:37:36,070 - INFO - 指数 399324 的数据条数: 11
2025-08-19 20:37:36,070 - INFO - 指数 399324 最近5日收盘价: [8834.95, 8859.45, 8824.24, 8868.59, 8864.9]
2025-08-19 20:37:36,070 - INFO - 指数 399324 的RSI5值: 63.897911832945894
2025-08-19 20:37:36,071 - INFO - 指数 399321 的数据条数: 11
2025-08-19 20:37:36,071 - INFO - 指数 399321 最近5日收盘价: [7667.86, 7638.14, 7663.04, 7638.73, 7647.05]
2025-08-19 20:37:36,071 - INFO - 指数 399321 的RSI5值: 38.07449856733553
2025-08-19 20:37:36,071 - INFO - 指数 000015 的数据条数: 0
2025-08-19 20:37:36,071 - WARNING - 指数 000015 数据不足，仅 0 条记录
2025-08-19 20:37:36,071 - INFO - 基于RSI5计算的强势指数: ['399372', '399006', '399376']
2025-08-19 20:37:36,071 - INFO - 各指数RSI5值: [('399372', 94.28986710963453), ('399006', 73.52709100473423), ('399376', 65.85071821172434)]
2025-08-19 20:37:36,071 - INFO - 正在获取强势指数成分股...
2025-08-19 20:37:36,071 - INFO - 从constituents_399372.csv获取到指数399372的成分股66只
2025-08-19 20:37:36,071 - INFO - 从数据源获取到指数399372的成分股数量: 66
2025-08-19 20:37:36,071 - INFO - 成功获取指数399372的成分股66只
2025-08-19 20:37:36,071 - INFO - 指数399372包含66只成分股
2025-08-19 20:37:36,072 - INFO - 从constituents_399006.csv获取到指数399006的成分股100只
2025-08-19 20:37:36,072 - INFO - 从数据源获取到指数399006的成分股数量: 100
2025-08-19 20:37:36,073 - INFO - 成功获取指数399006的成分股100只
2025-08-19 20:37:36,073 - INFO - 指数399006包含100只成分股
2025-08-19 20:37:36,073 - INFO - 从constituents_399376.csv获取到指数399376的成分股166只
2025-08-19 20:37:36,073 - INFO - 从数据源获取到指数399376的成分股数量: 166
2025-08-19 20:37:36,073 - INFO - 成功获取指数399376的成分股166只
2025-08-19 20:37:36,073 - INFO - 指数399376包含166只成分股
2025-08-19 20:37:36,073 - INFO - 选股池构建完成，共包含301只股票
2025-08-19 20:37:36,073 - INFO - 正在获取选股数据(200天)...
2025-08-19 20:37:36,073 - INFO - 开始读取数据文件...
2025-08-19 20:37:36,381 - INFO - 成功读取数据文件，共 1305091 行数据
2025-08-19 20:37:36,386 - INFO - 原始数据日期范围: 2010-01-01 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:37:36,618 - INFO - 请求的指数代码: []
2025-08-19 20:37:36,618 - INFO - 请求的股票代码: ['688568', '002756', '300751', '601857', '688278', '300316', '000301', '300601', '002311', '000034', '003031', '600329', '600563', '300498', '300803', '002056', '002318', '603501', '300070', '000737', '600011', '002249', '002714', '603129', '605111', '688041', '688676', '600660', '300558', '601899', '000683', '002906', '300390', '002463', '300529', '300633', '688385', '688520', '688100', '300750', '300699', '002572', '002460', '300487', '300458', '688111', '300442', '002773', '600456', '688005', '300413', '300054', '300433', '300666', '300676', '688223', '300115', '603556', '300454', '300122', '601702', '000625', '002468', '000997', '002607', '600938', '002475', '300207', '300724', '300776', '300373', '600583', '688002', '300274', '300144', '603868', '688295', '688281', '000403', '603195', '301236', '603236', '300957', '600872', '603456', '300765', '300896', '300679', '600779', '688301', '600977', '600032', '600737', '603225', '600809', '601336', '603993', '301029', '688183', '688052', '600499', '300308', '001308', '601918', '000426', '300672', '301536', '688778', '688271', '300033', '002690', '300124', '002312', '300012', '002484', '600519', '002244', '300568', '001389', '600188', '300832', '688516', '002850', '002597', '002472', '688361', '300919', '002831', '300628', '301269', '600933', '600141', '300627', '688582', '300073', '300661', '300979', '002176', '002179', '300748', '600098', '301165', '603613', '300394', '002402', '300212', '002432', '300888', '002429', '002050', '000596', '300573', '300059', '601633', '300604', '600760', '001203', '601919', '300142', '600438', '600547', '002594', '300383', '601969', '002155', '300760', '601127', '688008', '300118', '300009', '000568', '603688', '300432', '688036', '603179', '002266', '601816', '000966', '300347', '300418', '300496', '300567', '600009', '603565', '002506', '603871', '301035', '002837', '688037', '300001', '300395', '688012', '002978', '603025', '600021', '300782', '688248', '603290', '688032', '300003', '600150', '300037', '002240', '000100', '600905', '300457', '002984', '300136', '688200', '300253', '300677', '300775', '300450', '300474', '603786', '300017', '300015', '688506', '600023', '300857', '000792', '600089', '000878', '301267', '301358', '300408', '002131', '300339', '600436', '300146', '300014', '002867', '600702', '603056', '603317', '832982', '603305', '000543', '300058', '300759', '600361', '601689', '600623', '603707', '603259', '688981', '301498', '300285', '300777', '301015', '600171', '300763', '688050', '300866', '601600', '002320', '301301', '301611', '603444', '302132', '835185', '600795', '000858', '605296', '688153', '300502', '002541', '600392', '600675', '300002', '300223', '300024', '600685', '603027', '002518', '300623', '688018', '300346', '000032', '605090', '002497', '600312', '000893', '600578', '301589', '000830', '300761', '300298', '300251', '300735', '002371', '301308', '605499', '300779', '601717', '300595', '601225', '300476', '600707', '002865', '300999']
2025-08-19 20:37:36,647 - INFO - 匹配到 535043 行股票数据
2025-08-19 20:37:36,650 - INFO - 合并后的数据总行数: 535043
2025-08-19 20:37:36,650 - INFO - 指数和股票代码过滤完成，剩余 535043 行数据
2025-08-19 20:37:36,651 - INFO - 请求的结束日期 2025-08-19 超出实际数据范围，调整为实际最新日期: 2025-08-18
2025-08-19 20:37:36,658 - INFO - 过滤前数据量: 535043
2025-08-19 20:37:36,658 - INFO - 请求的日期范围: 2025-01-31 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:37:36,658 - INFO - 实际数据日期范围: 2010-01-04 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:37:36,659 - INFO - 日期范围有重叠，进行过滤
2025-08-19 20:37:36,661 - INFO - 根据日期范围 2025-01-31 至 2025-08-18 过滤后剩余 31309 行数据
2025-08-19 20:37:36,666 - INFO - 最终返回数据: 31309 行, 234 只股票
2025-08-19 20:37:36,669 - INFO - 成功获取股票数据，共31309条记录
2025-08-19 20:37:36,669 - INFO - 开始执行第一步：适度过滤明显不符合条件的股票
2025-08-19 20:37:37,359 - INFO - 过滤后剩余股票数量: 182/234
2025-08-19 20:37:37,360 - INFO - 开始执行第二步：对通过过滤的股票进行评分
2025-08-19 20:37:37,499 - INFO - 股票300498处于超卖区域，RSI: 22.727272727273046, 威廉指标: -81.30081300812981，降低评分
2025-08-19 20:37:37,604 - INFO - 股票300979处于超卖区域，RSI: 24.000000000000213, 威廉指标: -83.29764453961455，降低评分
2025-08-19 20:37:37,643 - INFO - 股票600023处于超卖区域，RSI: 26.315789473684404, 威廉指标: -64.70588235294088，降低评分
2025-08-19 20:37:37,662 - INFO - 股票600188处于超卖区域，RSI: 16.949152542372616, 威廉指标: -62.98342541436459，降低评分
2025-08-19 20:37:37,700 - INFO - 股票600795处于超卖区域，RSI: 6.250000000000114, 威廉指标: -95.99999999999991，降低评分
2025-08-19 20:37:37,703 - INFO - 股票600905处于超卖区域，RSI: 33.333333333332845, 威廉指标: -85.71428571428599，降低评分
2025-08-19 20:37:37,709 - INFO - 股票600938处于超卖区域，RSI: 17.99999999999997, 威廉指标: -100.0，降低评分
2025-08-19 20:37:37,714 - INFO - 股票601225处于超卖区域，RSI: 21.126760563380174, 威廉指标: -48.59437751004008，降低评分
2025-08-19 20:37:37,735 - INFO - 股票601919处于超卖区域，RSI: 0.0, 威廉指标: -86.11111111111121，降低评分
2025-08-19 20:37:37,866 - INFO - 
    === 选股分析报告 ===
    股票总数: 182
    平均MA60角度: 62.77°
    平均偏离度: 2.91%
    平均10日涨幅: 7.87%
    
    仓位配置建议:
    强势区股票(59只): 建议配置60%资金
    中性区股票(80只): 建议配置30%资金
    弱势区股票(43只): 建议保留10%现金
    
    评分分布:
    score
17.5     1
20.0     8
22.5     1
30.0     3
40.0    28
45.0     2
50.0    19
55.0     3
60.0    24
65.0    11
70.0    23
75.0    10
80.0    21
85.0    12
90.0    15
95.0     1
    
    前10名股票:
    symbol  score  close     ma5  ma60_angle  ma200_angle      rsi6  deviation  ma5_slope  ma200_slope  pct_10d  low_10d
301358   95.0  35.81  35.484   71.345972   -23.144241 75.365854   0.009187   0.012152    -0.000215 0.124686    31.58
301589   90.0 294.11 290.908   71.018945     7.311837 66.514806   0.011007  -0.000961     0.000064 0.010201   284.10
688005   90.0  35.07  34.848   76.092868    30.587735 59.829060   0.006371   0.002433     0.000294 0.080740    32.60
601969   90.0   8.69   8.608   77.705861    64.078357 65.714286   0.009526   0.001301     0.001008 0.029621     8.35
300373   90.0 306.85 304.180   79.034825    69.259269 62.179487   0.008778   0.002650     0.001286 0.065451   286.70
601899   90.0  34.47  34.646   76.980244    63.046810 57.142857   0.005080   0.005253     0.000964 0.041704    32.93
605090   90.0  45.79  45.654   77.587642    59.493761 67.013889   0.002979   0.006089     0.000834 0.051435    43.10
601600   90.0   8.47   8.480   78.597114    49.556436 60.227273   0.001179   0.005755     0.000580 0.052174     8.01
300957   90.0  48.94  48.408   64.497423    32.607661 62.247839   0.010990  -0.000397     0.000318 0.021499    47.43
688032   90.0 381.97 377.608   70.315804    34.037796 68.233126   0.011552   0.003609     0.000335 0.040762   361.09
    
2025-08-19 20:37:37,866 - INFO - 详细选股报告已保存至: ./data/selection_report.txt
2025-08-19 20:37:37,866 - INFO - 选股完成，共选出15只股票
2025-08-19 20:37:37,868 - INFO - 最终选股结果:
     symbol  score  stop_loss
95   301358   95.0      31.58
97   301589   90.0     284.10
159  688005   90.0      32.60
136  601969   90.0       8.35
33   300373   90.0     286.70
134  601899   90.0      32.93
157  605090   90.0      43.10
129  601600   90.0       8.01
86   300957   90.0      47.43
163  688032   90.0     361.09
90   301035   90.0      68.89
77   300776   90.0     270.87
36   300394   90.0     887.47
62   300633   90.0      32.90
3    300009   90.0     200.08
2025-08-19 20:37:37,871 - INFO - 选股结果已保存到: ./data/selected_stocks.csv
2025-08-19 20:42:49,253 - INFO - 未提供选股日期，使用当前日期: 2025-08-19
2025-08-19 20:42:49,253 - INFO - 开始执行选股策略，目标股票数量: 15
2025-08-19 20:42:49,253 - INFO - 开始数据可用性检查...
2025-08-19 20:42:49,253 - INFO - === 策略数据验证 ===
2025-08-19 20:42:49,253 - INFO - === 数据文件完整性检查 ===
2025-08-19 20:42:49,253 - INFO - ✓ 价格数据文件存在: ./data/prices.csv
2025-08-19 20:42:49,253 - INFO - ✓ 成分股文件存在: ./data/constituents.csv
2025-08-19 20:42:49,253 - INFO - === 价格数据验证 ===
2025-08-19 20:42:49,253 - INFO - 正在读取价格数据...
2025-08-19 20:42:49,527 - INFO - ✓ 成功读取价格数据，共 1305091 行
2025-08-19 20:42:49,528 - INFO - ✓ 所有必需列都存在
2025-08-19 20:42:49,605 - INFO - ✓ 日期范围: 2010-01-01 至 2025-08-18
2025-08-19 20:42:49,608 - INFO - ✓ 唯一股票代码数量: 484
2025-08-19 20:42:49,612 - WARNING - 警告: 以下列存在空值:
2025-08-19 20:42:49,612 - WARNING -   open: 1 个空值
2025-08-19 20:42:49,612 - WARNING -   high: 1 个空值
2025-08-19 20:42:49,612 - WARNING -   low: 1 个空值
2025-08-19 20:42:49,613 - INFO - === 成分股数据验证 ===
2025-08-19 20:42:49,613 - INFO - 找到 7 个成分股文件
2025-08-19 20:42:49,614 - INFO -   constituents_399376.csv: 166 只股票
2025-08-19 20:42:49,614 - INFO -   constituents_399374.csv: 100 只股票
2025-08-19 20:42:49,614 - INFO -   constituents_399006.csv: 100 只股票
2025-08-19 20:42:49,615 - INFO -   constituents_399372.csv: 66 只股票
2025-08-19 20:42:49,615 - INFO -   constituents_000015.csv: 50 只股票
2025-08-19 20:42:49,616 - INFO -   constituents_399321.csv: 50 只股票
2025-08-19 20:42:49,616 - INFO -   constituents_399324.csv: 40 只股票
2025-08-19 20:42:49,616 - INFO - ✓ 成分股数据总览: 7 个指数，共 572 只股票
2025-08-19 20:42:49,616 - INFO - ✓ 所有数据验证通过，可以执行策略
2025-08-19 20:42:49,616 - INFO - 加载5天测试数据以验证数据源...
2025-08-19 20:42:49,616 - INFO - 开始读取数据文件...
2025-08-19 20:42:49,927 - INFO - 成功读取数据文件，共 1305091 行数据
2025-08-19 20:42:49,934 - INFO - 原始数据日期范围: 2010-01-01 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:42:50,138 - INFO - 未指定特定股票代码，返回所有数据
2025-08-19 20:42:50,139 - INFO - 请求的结束日期 2025-08-19 超出实际数据范围，调整为实际最新日期: 2025-08-18
2025-08-19 20:42:50,164 - INFO - 过滤前数据量: 1305091
2025-08-19 20:42:50,164 - INFO - 请求的日期范围: 2025-08-14 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:42:50,166 - INFO - 实际数据日期范围: 2010-01-01 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:42:50,167 - INFO - 日期范围有重叠，进行过滤
2025-08-19 20:42:50,170 - INFO - 根据日期范围 2025-08-14 至 2025-08-18 过滤后剩余 1447 行数据
2025-08-19 20:42:50,182 - INFO - 最终返回数据: 1447 行, 483 只股票
2025-08-19 20:42:50,189 - INFO - 成功加载测试数据，共1447条记录
2025-08-19 20:42:50,189 - INFO - 数据源检查通过
2025-08-19 20:42:50,190 - INFO - 正在获取强势指数...
2025-08-19 20:42:50,191 - INFO - 正在获取短期强势指数...
2025-08-19 20:42:50,191 - INFO - 基于选股日期计算短期强势指数: 2025-08-19
2025-08-19 20:42:50,191 - INFO - 请求指数数据日期范围: 2025-08-04 至 2025-08-19
2025-08-19 20:42:50,191 - INFO - 请求的指数列表: ['399372', '399374', '399376', '399006', '399324', '399321', '000015']
2025-08-19 20:42:50,191 - INFO - 请求列表中包含000015指数
2025-08-19 20:42:50,191 - INFO - 开始读取数据文件...
2025-08-19 20:42:50,500 - INFO - 成功读取数据文件，共 1305091 行数据
2025-08-19 20:42:50,504 - INFO - 原始数据日期范围: 2010-01-01 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:42:50,704 - INFO - 请求的指数代码: ['399372', '399374', '399376', '399006', '399324', '399321', '000015']
2025-08-19 20:42:50,704 - INFO - 请求的股票代码: []
2025-08-19 20:42:50,704 - INFO - 请求列表中包含000015指数
2025-08-19 20:42:50,726 - INFO - 通过symbol列匹配到 24468 行指数数据
2025-08-19 20:42:50,753 - INFO - 通过symbol列匹配到000015指数 3150 行数据
2025-08-19 20:42:50,757 - INFO - 合并后的数据总行数: 24468
2025-08-19 20:42:50,757 - INFO - 指数和股票代码过滤完成，剩余 24468 行数据
2025-08-19 20:42:50,759 - INFO - 请求的结束日期 2025-08-19 超出实际数据范围，调整为实际最新日期: 2025-08-18
2025-08-19 20:42:50,768 - INFO - 过滤前数据量: 24468
2025-08-19 20:42:50,768 - INFO - 请求的日期范围: 2025-08-04 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:42:50,768 - INFO - 实际数据日期范围: 2010-01-01 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:42:50,768 - INFO - 日期范围有重叠，进行过滤
2025-08-19 20:42:50,769 - INFO - 根据日期范围 2025-08-04 至 2025-08-18 过滤后剩余 77 行数据
2025-08-19 20:42:50,769 - INFO - 最终返回数据: 77 行, 7 只股票
2025-08-19 20:42:50,770 - INFO - 从数据源获取到的指数数据: 77 条记录
2025-08-19 20:42:50,770 - INFO - 获取到的指数数量: 7
2025-08-19 20:42:50,770 - INFO - 获取到的指数代码: ['000015', '399006', '399321', '399324', '399372', '399374', '399376']
2025-08-19 20:42:50,770 - INFO - 000015指数的数据条数: 11
2025-08-19 20:42:50,770 - INFO - 000015指数的日期范围: 2025-08-04 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:42:50,770 - INFO - 指数 399372 的数据条数: 11
2025-08-19 20:42:50,771 - INFO - 指数 399372 的最新数据日期: 2025-08-18 00:00:00
2025-08-19 20:42:50,771 - INFO - 指数 399374 的数据条数: 11
2025-08-19 20:42:50,771 - INFO - 指数 399374 的最新数据日期: 2025-08-18 00:00:00
2025-08-19 20:42:50,771 - INFO - 指数 399376 的数据条数: 11
2025-08-19 20:42:50,771 - INFO - 指数 399376 的最新数据日期: 2025-08-18 00:00:00
2025-08-19 20:42:50,771 - INFO - 指数 399006 的数据条数: 11
2025-08-19 20:42:50,771 - INFO - 指数 399006 的最新数据日期: 2025-08-18 00:00:00
2025-08-19 20:42:50,771 - INFO - 指数 399324 的数据条数: 11
2025-08-19 20:42:50,771 - INFO - 指数 399324 的最新数据日期: 2025-08-18 00:00:00
2025-08-19 20:42:50,771 - INFO - 指数 399321 的数据条数: 11
2025-08-19 20:42:50,771 - INFO - 指数 399321 的最新数据日期: 2025-08-18 00:00:00
2025-08-19 20:42:50,772 - INFO - 指数 000015 的数据条数: 11
2025-08-19 20:42:50,772 - INFO - 指数 000015 的最新数据日期: 2025-08-18 00:00:00
2025-08-19 20:42:50,772 - INFO - 指数 399372 的数据条数: 11
2025-08-19 20:42:50,772 - INFO - 指数 399372 最近5日收盘价: [4239.1, 4311.24, 4308.49, 4336.89, 4372.58]
2025-08-19 20:42:50,772 - INFO - 指数 399372 的RSI5值: 94.28986710963453
2025-08-19 20:42:50,772 - INFO - 指数 399374 的数据条数: 11
2025-08-19 20:42:50,772 - INFO - 指数 399374 最近5日收盘价: [3719.8, 3750.33, 3708.98, 3774.22, 3825.42]
2025-08-19 20:42:50,772 - INFO - 指数 399374 的RSI5值: 54.22847022359976
2025-08-19 20:42:50,772 - INFO - 指数 399376 的数据条数: 11
2025-08-19 20:42:50,772 - INFO - 指数 399376 最近5日收盘价: [5192.73, 5274.41, 5218.7, 5353.86, 5459.3]
2025-08-19 20:42:50,772 - INFO - 指数 399376 的RSI5值: 65.85071821172434
2025-08-19 20:42:50,773 - INFO - 指数 399006 的数据条数: 11
2025-08-19 20:42:50,773 - INFO - 指数 399006 最近5日收盘价: [2409.4, 2496.5, 2469.66, 2534.22, 2606.2]
2025-08-19 20:42:50,773 - INFO - 指数 399006 的RSI5值: 73.52709100473423
2025-08-19 20:42:50,773 - INFO - 指数 399324 的数据条数: 11
2025-08-19 20:42:50,773 - INFO - 指数 399324 最近5日收盘价: [8834.95, 8859.45, 8824.24, 8868.59, 8864.9]
2025-08-19 20:42:50,773 - INFO - 指数 399324 的RSI5值: 63.897911832945894
2025-08-19 20:42:50,773 - INFO - 指数 399321 的数据条数: 11
2025-08-19 20:42:50,773 - INFO - 指数 399321 最近5日收盘价: [7667.86, 7638.14, 7663.04, 7638.73, 7647.05]
2025-08-19 20:42:50,773 - INFO - 指数 399321 的RSI5值: 38.07449856733553
2025-08-19 20:42:50,774 - INFO - 指数 000015 的数据条数: 11
2025-08-19 20:42:50,774 - INFO - 指数 000015 最近5日收盘价: [3149.81, 3125.62, 3101.83, 3096.59, 3092.75]
2025-08-19 20:42:50,774 - INFO - 指数 000015 的RSI5值: 0.0
2025-08-19 20:42:50,774 - INFO - 基于RSI5计算的强势指数: ['399372', '399006', '399376']
2025-08-19 20:42:50,774 - INFO - 各指数RSI5值: [('399372', np.float64(94.28986710963453)), ('399006', np.float64(73.52709100473423)), ('399376', np.float64(65.85071821172434))]
2025-08-19 20:42:50,774 - INFO - 正在获取强势指数成分股...
2025-08-19 20:42:50,775 - INFO - 从constituents_399372.csv获取到指数399372的成分股66只
2025-08-19 20:42:50,775 - INFO - 从数据源获取到指数399372的成分股数量: 66
2025-08-19 20:42:50,775 - INFO - 成功获取指数399372的成分股66只
2025-08-19 20:42:50,775 - INFO - 指数399372包含66只成分股
2025-08-19 20:42:50,776 - INFO - 从constituents_399006.csv获取到指数399006的成分股100只
2025-08-19 20:42:50,776 - INFO - 从数据源获取到指数399006的成分股数量: 100
2025-08-19 20:42:50,776 - INFO - 成功获取指数399006的成分股100只
2025-08-19 20:42:50,776 - INFO - 指数399006包含100只成分股
2025-08-19 20:42:50,776 - INFO - 从constituents_399376.csv获取到指数399376的成分股166只
2025-08-19 20:42:50,776 - INFO - 从数据源获取到指数399376的成分股数量: 166
2025-08-19 20:42:50,776 - INFO - 成功获取指数399376的成分股166只
2025-08-19 20:42:50,776 - INFO - 指数399376包含166只成分股
2025-08-19 20:42:50,776 - INFO - 选股池构建完成，共包含301只股票
2025-08-19 20:42:50,776 - INFO - 正在获取选股数据(200天)...
2025-08-19 20:42:50,776 - INFO - 开始读取数据文件...
2025-08-19 20:42:51,088 - INFO - 成功读取数据文件，共 1305091 行数据
2025-08-19 20:42:51,093 - INFO - 原始数据日期范围: 2010-01-01 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:42:51,290 - INFO - 请求的指数代码: []
2025-08-19 20:42:51,290 - INFO - 请求的股票代码: ['603501', '300666', '300672', '600737', '601633', '300394', '300122', '000966', '300207', '601717', '688361', '603195', '300623', '300604', '300661', '300251', '002690', '600392', '688520', '300115', '301269', '002249', '688041', '300628', '002484', '600150', '000568', '002518', '301035', '000596', '000426', '600188', '600675', '600702', '600795', '603305', '300285', '002240', '688516', '002714', '002475', '603179', '603317', '603613', '600438', '600707', '603225', '688005', '002266', '002594', '300782', '600563', '002050', '002460', '300919', '601600', '002320', '300059', '300595', '000625', '601702', '002429', '002865', '603556', '605111', '600499', '688111', '300458', '600905', '601336', '300568', '300212', '300253', '300999', '002318', '300144', '300832', '002468', '002371', '600519', '002472', '002867', '688032', '301236', '300775', '003031', '688018', '300750', '300748', '000100', '300573', '301498', '300136', '600623', '000737', '605296', '688281', '002607', '300058', '000830', '600312', '688183', '688008', '688301', '600547', '600685', '002402', '688568', '603871', '601127', '300777', '300979', '002756', '688778', '600456', '300037', '002432', '301267', '300432', '002773', '300054', '301589', '300496', '603259', '300418', '835185', '300866', '002176', '300633', '600361', '603868', '300761', '002131', '002155', '605090', '300763', '300142', '002244', '300896', '600089', '688002', '300450', '688153', '300073', '300857', '300454', '300146', '600809', '600023', '688385', '300274', '300474', '300316', '000301', '000403', '600872', '300308', '600977', '300487', '300498', '601919', '300346', '603993', '300699', '300724', '002906', '002984', '600141', '000878', '002572', '600583', '300679', '603236', '603290', '300413', '300476', '603129', '002311', '300347', '300442', '600329', '600021', '300383', '600660', '688036', '300390', '300567', '000034', '000893', '300012', '002831', '300014', '688248', '002837', '600098', '688278', '688223', '300677', '002497', '301536', '000683', '300433', '300759', '600938', '001389', '600032', '601918', '601899', '300601', '601969', '302132', '688676', '300502', '300373', '002056', '300002', '300676', '000543', '301301', '605499', '300395', '300776', '300803', '603565', '001308', '300024', '600436', '002312', '300765', '600933', '300223', '002541', '688271', '688981', '300017', '300033', '601816', '002463', '688052', '300558', '300118', '603786', '832982', '300001', '600760', '002850', '600011', '300124', '601689', '300009', '600779', '688100', '688012', '300529', '603688', '601857', '300735', '603025', '600578', '601225', '002597', '300298', '301358', '301611', '300457', '688050', '300751', '002978', '001203', '603444', '301308', '688295', '000792', '300779', '002179', '603027', '688037', '688506', '300015', '300957', '300003', '301015', '301029', '300888', '600009', '603056', '301165', '600171', '688200', '000032', '300760', '300070', '002506', '300408', '300627', '000997', '603707', '300339', '603456', '688582', '000858']
2025-08-19 20:42:51,327 - INFO - 匹配到 746227 行股票数据
2025-08-19 20:42:51,331 - INFO - 合并后的数据总行数: 746227
2025-08-19 20:42:51,331 - INFO - 指数和股票代码过滤完成，剩余 746227 行数据
2025-08-19 20:42:51,332 - INFO - 请求的结束日期 2025-08-19 超出实际数据范围，调整为实际最新日期: 2025-08-18
2025-08-19 20:42:51,340 - INFO - 过滤前数据量: 746227
2025-08-19 20:42:51,340 - INFO - 请求的日期范围: 2025-01-31 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:42:51,340 - INFO - 实际数据日期范围: 2010-01-04 00:00:00 至 2025-08-18 00:00:00
2025-08-19 20:42:51,342 - INFO - 日期范围有重叠，进行过滤
2025-08-19 20:42:51,344 - INFO - 根据日期范围 2025-01-31 至 2025-08-18 过滤后剩余 40271 行数据
2025-08-19 20:42:51,353 - INFO - 最终返回数据: 40271 行, 301 只股票
2025-08-19 20:42:51,357 - INFO - 成功获取股票数据，共40271条记录
2025-08-19 20:42:51,357 - INFO - 开始执行第一步：适度过滤明显不符合条件的股票
2025-08-19 20:42:52,440 - INFO - 过滤后剩余股票数量: 234/301
2025-08-19 20:42:52,441 - INFO - 开始执行第二步：对通过过滤的股票进行评分
2025-08-19 20:42:52,463 - INFO - 股票000543处于超卖区域，RSI: 30.952380952380523, 威廉指标: -84.14634146341477，降低评分
2025-08-19 20:42:52,492 - INFO - 股票000893处于超卖区域，RSI: 45.48551959114139, 威廉指标: -86.18784530386742，降低评分
2025-08-19 20:42:52,538 - INFO - 股票002266处于超卖区域，RSI: 20.253164556962062, 威廉指标: -74.90039840637438，降低评分
2025-08-19 20:42:52,626 - INFO - 股票002867处于超卖区域，RSI: 22.580645161289624, 威廉指标: -63.52941176470568，降低评分
2025-08-19 20:42:52,808 - INFO - 股票300498处于超卖区域，RSI: 22.727272727273046, 威廉指标: -81.30081300812981，降低评分
2025-08-19 20:42:52,943 - INFO - 股票300979处于超卖区域，RSI: 24.000000000000213, 威廉指标: -83.29764453961455，降低评分
2025-08-19 20:42:52,993 - INFO - 股票600023处于超卖区域，RSI: 26.315789473684404, 威廉指标: -64.70588235294088，降低评分
2025-08-19 20:42:53,018 - INFO - 股票600188处于超卖区域，RSI: 16.949152542372616, 威廉指标: -62.98342541436459，降低评分
2025-08-19 20:42:53,067 - INFO - 股票600795处于超卖区域，RSI: 6.250000000000114, 威廉指标: -95.99999999999991，降低评分
2025-08-19 20:42:53,070 - INFO - 股票600905处于超卖区域，RSI: 33.333333333332845, 威廉指标: -85.71428571428599，降低评分
2025-08-19 20:42:53,078 - INFO - 股票600938处于超卖区域，RSI: 17.99999999999997, 威廉指标: -100.0，降低评分
2025-08-19 20:42:53,085 - INFO - 股票601225处于超卖区域，RSI: 21.126760563380174, 威廉指标: -48.59437751004008，降低评分
2025-08-19 20:42:53,113 - INFO - 股票601919处于超卖区域，RSI: 0.0, 威廉指标: -86.11111111111121，降低评分
2025-08-19 20:42:53,278 - INFO - 
    === 选股分析报告 ===
    股票总数: 234
    平均MA60角度: 63.31°
    平均偏离度: 2.74%
    平均10日涨幅: 7.69%
    
    仓位配置建议:
    强势区股票(82只): 建议配置60%资金
    中性区股票(97只): 建议配置30%资金
    弱势区股票(55只): 建议保留10%现金
    
    评分分布:
    score
17.5      1
20.0      9
22.5      3
30.0      4
40.0     34
45.0      4
50.0     24
55.0      4
60.0     26
65.0     16
70.0     27
75.0     14
80.0     27
85.0     16
90.0     20
95.0      3
100.0     2
    
    前10名股票:
    symbol  score  close     ma5  ma60_angle  ma200_angle      rsi6  deviation  ma5_slope  ma200_slope  pct_10d  low_10d
002690  100.0 101.13 100.804   41.671904    37.199270 57.549858   0.003234  -0.000067     0.000377 0.015973    99.50
003031  100.0 158.44 157.154   79.284848    65.315872 61.224490   0.008183   0.002772     0.001065 0.043742   151.11
002176   95.0 121.23 120.802   78.623210    58.341197 79.324403   0.003543   0.023745     0.000798 0.246197    95.76
301358   95.0  35.81  35.484   71.345972   -23.144241 75.365854   0.009187   0.012152    -0.000215 0.124686    31.58
002432   95.0 133.36 132.076   44.051721     7.691895 79.503106   0.009722   0.002171     0.000067 0.034681   127.99
002773   90.0  90.98  91.452   86.587573    83.663527 66.747770   0.005161   0.007239     0.004131 0.067715    83.79
002240   90.0  30.51  30.648   85.475822    77.252908 67.297762   0.004503   0.009932     0.002117 0.147856    26.18
688005   90.0  35.07  34.848   76.092868    30.587735 59.829060   0.006371   0.002433     0.000294 0.080740    32.60
605090   90.0  45.79  45.654   77.587642    59.493761 67.013889   0.002979   0.006089     0.000834 0.051435    43.10
601969   90.0   8.69   8.608   77.705861    64.078357 65.714286   0.009526   0.001301     0.001008 0.029621     8.35
    
2025-08-19 20:42:53,278 - INFO - 详细选股报告已保存至: ./data/selection_report.txt
2025-08-19 20:42:53,278 - INFO - 选股完成，共选出15只股票
2025-08-19 20:42:53,280 - INFO - 最终选股结果:
     symbol  score  stop_loss
42   002690  100.0      99.50
51   003031  100.0     151.11
22   002176   95.0      95.76
147  301358   95.0      31.58
33   002432   95.0     127.99
45   002773   90.0      83.79
23   002240   90.0      26.18
211  688005   90.0      32.60
209  605090   90.0      43.10
188  601969   90.0       8.35
85   300373   90.0     286.70
186  601899   90.0      32.93
138  300957   90.0      47.43
142  301035   90.0      68.89
21   002155   90.0      63.26
2025-08-19 20:42:53,283 - INFO - 选股结果已保存到: ./data/selected_stocks.csv
2025-08-19 23:09:59,860 - INFO - 未提供选股日期，使用当前日期: 2025-08-19
2025-08-19 23:09:59,860 - INFO - 开始执行选股策略，目标股票数量: 15
2025-08-19 23:09:59,860 - INFO - 开始数据可用性检查...
2025-08-19 23:09:59,860 - INFO - === 策略数据验证 ===
2025-08-19 23:09:59,860 - INFO - === 数据文件完整性检查 ===
2025-08-19 23:09:59,860 - INFO - ✓ 价格数据文件存在: ./data/prices.csv
2025-08-19 23:09:59,860 - INFO - ✓ 成分股文件存在: ./data/constituents.csv
2025-08-19 23:09:59,860 - INFO - === 价格数据验证 ===
2025-08-19 23:09:59,860 - INFO - 正在读取价格数据...
2025-08-19 23:10:00,147 - INFO - ✓ 成功读取价格数据，共 1305575 行
2025-08-19 23:10:00,147 - INFO - ✓ 所有必需列都存在
2025-08-19 23:10:00,222 - INFO - ✓ 日期范围: 2010-01-01 至 2025-08-19
2025-08-19 23:10:00,226 - INFO - ✓ 唯一股票代码数量: 484
2025-08-19 23:10:00,229 - WARNING - 警告: 以下列存在空值:
2025-08-19 23:10:00,230 - WARNING -   open: 1 个空值
2025-08-19 23:10:00,230 - WARNING -   high: 1 个空值
2025-08-19 23:10:00,230 - WARNING -   low: 1 个空值
2025-08-19 23:10:00,231 - INFO - === 成分股数据验证 ===
2025-08-19 23:10:00,231 - INFO - 找到 7 个成分股文件
2025-08-19 23:10:00,232 - INFO -   constituents_399376.csv: 166 只股票
2025-08-19 23:10:00,233 - INFO -   constituents_399374.csv: 100 只股票
2025-08-19 23:10:00,233 - INFO -   constituents_399006.csv: 100 只股票
2025-08-19 23:10:00,233 - INFO -   constituents_399372.csv: 66 只股票
2025-08-19 23:10:00,234 - INFO -   constituents_000015.csv: 50 只股票
2025-08-19 23:10:00,234 - INFO -   constituents_399321.csv: 50 只股票
2025-08-19 23:10:00,235 - INFO -   constituents_399324.csv: 40 只股票
2025-08-19 23:10:00,235 - INFO - ✓ 成分股数据总览: 7 个指数，共 572 只股票
2025-08-19 23:10:00,235 - INFO - ✓ 所有数据验证通过，可以执行策略
2025-08-19 23:10:00,235 - INFO - 加载5天测试数据以验证数据源...
2025-08-19 23:10:00,235 - INFO - 开始读取数据文件...
2025-08-19 23:10:00,544 - INFO - 成功读取数据文件，共 1305575 行数据
2025-08-19 23:10:00,549 - INFO - 原始数据日期范围: 2010-01-01 00:00:00 至 2025-08-19 00:00:00
2025-08-19 23:10:00,751 - INFO - 未指定特定股票代码，返回所有数据
2025-08-19 23:10:00,774 - INFO - 过滤前数据量: 1305575
2025-08-19 23:10:00,774 - INFO - 请求的日期范围: 2025-08-14 00:00:00 至 2025-08-19 00:00:00
2025-08-19 23:10:00,776 - INFO - 实际数据日期范围: 2010-01-01 00:00:00 至 2025-08-19 00:00:00
2025-08-19 23:10:00,777 - INFO - 日期范围有重叠，进行过滤
2025-08-19 23:10:00,782 - INFO - 根据日期范围 2025-08-14 至 2025-08-19 过滤后剩余 1931 行数据
2025-08-19 23:10:00,793 - INFO - 最终返回数据: 1931 行, 484 只股票
2025-08-19 23:10:00,800 - INFO - 成功加载测试数据，共1931条记录
2025-08-19 23:10:00,800 - INFO - 数据源检查通过
2025-08-19 23:10:00,802 - INFO - 正在获取强势指数...
2025-08-19 23:10:00,802 - INFO - 正在获取短期强势指数...
2025-08-19 23:10:00,802 - INFO - 基于选股日期计算短期强势指数: 2025-08-19
2025-08-19 23:10:00,802 - INFO - 请求指数数据日期范围: 2025-08-04 至 2025-08-19
2025-08-19 23:10:00,802 - INFO - 请求的指数列表: ['399372', '399374', '399376', '399006', '399324', '399321', '000015']
2025-08-19 23:10:00,802 - INFO - 请求列表中包含000015指数
2025-08-19 23:10:00,802 - INFO - 开始读取数据文件...
2025-08-19 23:10:01,110 - INFO - 成功读取数据文件，共 1305575 行数据
2025-08-19 23:10:01,115 - INFO - 原始数据日期范围: 2010-01-01 00:00:00 至 2025-08-19 00:00:00
2025-08-19 23:10:01,312 - INFO - 请求的指数代码: ['399372', '399374', '399376', '399006', '399324', '399321', '000015']
2025-08-19 23:10:01,312 - INFO - 请求的股票代码: []
2025-08-19 23:10:01,312 - INFO - 请求列表中包含000015指数
2025-08-19 23:10:01,333 - INFO - 通过symbol列匹配到 24475 行指数数据
2025-08-19 23:10:01,359 - INFO - 通过symbol列匹配到000015指数 3151 行数据
2025-08-19 23:10:01,364 - INFO - 合并后的数据总行数: 24475
2025-08-19 23:10:01,364 - INFO - 指数和股票代码过滤完成，剩余 24475 行数据
2025-08-19 23:10:01,373 - INFO - 过滤前数据量: 24475
2025-08-19 23:10:01,374 - INFO - 请求的日期范围: 2025-08-04 00:00:00 至 2025-08-19 00:00:00
2025-08-19 23:10:01,374 - INFO - 实际数据日期范围: 2010-01-01 00:00:00 至 2025-08-19 00:00:00
2025-08-19 23:10:01,374 - INFO - 日期范围有重叠，进行过滤
2025-08-19 23:10:01,374 - INFO - 根据日期范围 2025-08-04 至 2025-08-19 过滤后剩余 84 行数据
2025-08-19 23:10:01,375 - INFO - 最终返回数据: 84 行, 7 只股票
2025-08-19 23:10:01,375 - INFO - 从数据源获取到的指数数据: 84 条记录
2025-08-19 23:10:01,375 - INFO - 获取到的指数数量: 7
2025-08-19 23:10:01,375 - INFO - 获取到的指数代码: ['000015', '399006', '399321', '399324', '399372', '399374', '399376']
2025-08-19 23:10:01,376 - INFO - 000015指数的数据条数: 12
2025-08-19 23:10:01,376 - INFO - 000015指数的日期范围: 2025-08-04 00:00:00 至 2025-08-19 00:00:00
2025-08-19 23:10:01,376 - INFO - 指数 399372 的数据条数: 12
2025-08-19 23:10:01,376 - INFO - 指数 399372 的最新数据日期: 2025-08-19 00:00:00
2025-08-19 23:10:01,376 - INFO - 指数 399374 的数据条数: 12
2025-08-19 23:10:01,376 - INFO - 指数 399374 的最新数据日期: 2025-08-19 00:00:00
2025-08-19 23:10:01,376 - INFO - 指数 399376 的数据条数: 12
2025-08-19 23:10:01,376 - INFO - 指数 399376 的最新数据日期: 2025-08-19 00:00:00
2025-08-19 23:10:01,376 - INFO - 指数 399006 的数据条数: 12
2025-08-19 23:10:01,376 - INFO - 指数 399006 的最新数据日期: 2025-08-19 00:00:00
2025-08-19 23:10:01,376 - INFO - 指数 399324 的数据条数: 12
2025-08-19 23:10:01,377 - INFO - 指数 399324 的最新数据日期: 2025-08-19 00:00:00
2025-08-19 23:10:01,377 - INFO - 指数 399321 的数据条数: 12
2025-08-19 23:10:01,377 - INFO - 指数 399321 的最新数据日期: 2025-08-19 00:00:00
2025-08-19 23:10:01,377 - INFO - 指数 000015 的数据条数: 12
2025-08-19 23:10:01,377 - INFO - 指数 000015 的最新数据日期: 2025-08-19 00:00:00
2025-08-19 23:10:01,377 - INFO - 指数 399372 的数据条数: 12
2025-08-19 23:10:01,377 - INFO - 指数 399372 最近5日收盘价: [4311.24, 4308.49, 4336.89, 4372.58, 4358.64]
2025-08-19 23:10:01,377 - INFO - 指数 399372 的RSI5值: 79.33894528348645
2025-08-19 23:10:01,377 - INFO - 指数 399374 的数据条数: 12
2025-08-19 23:10:01,377 - INFO - 指数 399374 最近5日收盘价: [3750.33, 3708.98, 3774.22, 3825.42, 3816.0]
2025-08-19 23:10:01,377 - INFO - 指数 399374 的RSI5值: 69.63698343400516
2025-08-19 23:10:01,378 - INFO - 指数 399376 的数据条数: 12
2025-08-19 23:10:01,378 - INFO - 指数 399376 最近5日收盘价: [5274.41, 5218.7, 5353.86, 5459.3, 5434.78]
2025-08-19 23:10:01,378 - INFO - 指数 399376 的RSI5值: 74.99298694012397
2025-08-19 23:10:01,378 - INFO - 指数 399006 的数据条数: 12
2025-08-19 23:10:01,378 - INFO - 指数 399006 最近5日收盘价: [2496.5, 2469.66, 2534.22, 2606.2, 2601.74]
2025-08-19 23:10:01,378 - INFO - 指数 399006 的RSI5值: 81.35128693994271
2025-08-19 23:10:01,378 - INFO - 指数 399324 的数据条数: 12
2025-08-19 23:10:01,378 - INFO - 指数 399324 最近5日收盘价: [8859.45, 8824.24, 8868.59, 8864.9, 8868.12]
2025-08-19 23:10:01,378 - INFO - 指数 399324 的RSI5值: 55.01329941019994
2025-08-19 23:10:01,378 - INFO - 指数 399321 的数据条数: 12
2025-08-19 23:10:01,378 - INFO - 指数 399321 最近5日收盘价: [7638.14, 7663.04, 7638.73, 7647.05, 7625.23]
2025-08-19 23:10:01,378 - INFO - 指数 399321 的RSI5值: 41.86515437933172
2025-08-19 23:10:01,379 - INFO - 指数 000015 的数据条数: 12
2025-08-19 23:10:01,379 - INFO - 指数 000015 最近5日收盘价: [3125.62, 3101.83, 3096.59, 3092.75, 3090.85]
2025-08-19 23:10:01,379 - INFO - 指数 000015 的RSI5值: 0.0
2025-08-19 23:10:01,379 - INFO - 基于RSI5计算的强势指数: ['399006', '399372', '399376']
2025-08-19 23:10:01,379 - INFO - 各指数RSI5值: [('399006', np.float64(81.35128693994271)), ('399372', np.float64(79.33894528348645)), ('399376', np.float64(74.99298694012397))]
2025-08-19 23:10:01,379 - INFO - 正在获取强势指数成分股...
2025-08-19 23:10:01,379 - INFO - 从constituents_399006.csv获取到指数399006的成分股100只
2025-08-19 23:10:01,379 - INFO - 从数据源获取到指数399006的成分股数量: 100
2025-08-19 23:10:01,379 - INFO - 成功获取指数399006的成分股100只
2025-08-19 23:10:01,379 - INFO - 指数399006包含100只成分股
2025-08-19 23:10:01,380 - INFO - 从constituents_399372.csv获取到指数399372的成分股66只
2025-08-19 23:10:01,380 - INFO - 从数据源获取到指数399372的成分股数量: 66
2025-08-19 23:10:01,380 - INFO - 成功获取指数399372的成分股66只
2025-08-19 23:10:01,380 - INFO - 指数399372包含66只成分股
2025-08-19 23:10:01,380 - INFO - 从constituents_399376.csv获取到指数399376的成分股166只
2025-08-19 23:10:01,380 - INFO - 从数据源获取到指数399376的成分股数量: 166
2025-08-19 23:10:01,381 - INFO - 成功获取指数399376的成分股166只
2025-08-19 23:10:01,381 - INFO - 指数399376包含166只成分股
2025-08-19 23:10:01,381 - INFO - 选股池构建完成，共包含301只股票
2025-08-19 23:10:01,381 - INFO - 正在获取选股数据(200天)...
2025-08-19 23:10:01,381 - INFO - 开始读取数据文件...
2025-08-19 23:10:01,689 - INFO - 成功读取数据文件，共 1305575 行数据
2025-08-19 23:10:01,693 - INFO - 原始数据日期范围: 2010-01-01 00:00:00 至 2025-08-19 00:00:00
2025-08-19 23:10:01,892 - INFO - 请求的指数代码: []
2025-08-19 23:10:01,892 - INFO - 请求的股票代码: ['300395', '300568', '600905', '300454', '603129', '002714', '300373', '300308', '603225', '002984', '603290', '603688', '600938', '688278', '832982', '300999', '301267', '603786', '300037', '300567', '300979', '300316', '002179', '600660', '301015', '002244', '688361', '002607', '688676', '300502', '601816', '001308', '600361', '600779', '601702', '002831', '002463', '300677', '601689', '603317', '300832', '601600', '002429', '002690', '301358', '688183', '600023', '603179', '688036', '603305', '300761', '600685', '301536', '300627', '688041', '603027', '301498', '300274', '002475', '603565', '300866', '601899', '688018', '300724', '300450', '002484', '300124', '600188', '600702', '300699', '300024', '300207', '301301', '002756', '600583', '002318', '000625', '301165', '300666', '000596', '600009', '600436', '300012', '300212', '601633', '300285', '002837', '603613', '688568', '300408', '300529', '300070', '300474', '600809', '601919', '300498', '300779', '603868', '300763', '300457', '600563', '002176', '688778', '002867', '300014', '301269', '300054', '300760', '300015', '000683', '003031', '600438', '688050', '002978', '688052', '688037', '000568', '300672', '300432', '835185', '300001', '300009', '300857', '000403', '300033', '600737', '603871', '688248', '300418', '688005', '605499', '002320', '688012', '601918', '603444', '300957', '600150', '300661', '688111', '301308', '300888', '600795', '601857', '603993', '002906', '600089', '301236', '002311', '301589', '688281', '000301', '002597', '300487', '300573', '603056', '688582', '002240', '300476', '300496', '600021', '688271', '300347', '603556', '300253', '301035', '000032', '002468', '300002', '603025', '002371', '300782', '603501', '002572', '300223', '002541', '300144', '000100', '300896', '601127', '300558', '002865', '605111', '000426', '302132', '002518', '002056', '002155', '688516', '300623', '688981', '600392', '002497', '600933', '002050', '601336', '002312', '002850', '300298', '002460', '300413', '300433', '603195', '300777', '600032', '600456', '600329', '600707', '000792', '600578', '300118', '300122', '600977', '601717', '300633', '002594', '688200', '603236', '600011', '688100', '000830', '300919', '688008', '002506', '600547', '688385', '300339', '300058', '300776', '601225', '603259', '300775', '688295', '300759', '000034', '300383', '000878', '601969', '300458', '000737', '002432', '300604', '001389', '300346', '300735', '600519', '001203', '300751', '300748', '600312', '605090', '600098', '300003', '300390', '000543', '300628', '300750', '300136', '000893', '300442', '600623', '300679', '002773', '300601', '000966', '301029', '300073', '300765', '000858', '300059', '605296', '688520', '300115', '300142', '000997', '603707', '300146', '300676', '002249', '688506', '002266', '002402', '603456', '688002', '300017', '002131', '600171', '688153', '300394', '002472', '600141', '688032', '301611', '300803', '688301', '600675', '600760', '300251', '688223', '300595', '600499', '600872']
2025-08-19 23:10:01,930 - INFO - 匹配到 746528 行股票数据
2025-08-19 23:10:01,934 - INFO - 合并后的数据总行数: 746528
2025-08-19 23:10:01,934 - INFO - 指数和股票代码过滤完成，剩余 746528 行数据
2025-08-19 23:10:01,943 - INFO - 过滤前数据量: 746528
2025-08-19 23:10:01,943 - INFO - 请求的日期范围: 2025-01-31 00:00:00 至 2025-08-19 00:00:00
2025-08-19 23:10:01,944 - INFO - 实际数据日期范围: 2010-01-04 00:00:00 至 2025-08-19 00:00:00
2025-08-19 23:10:01,944 - INFO - 日期范围有重叠，进行过滤
2025-08-19 23:10:01,946 - INFO - 根据日期范围 2025-01-31 至 2025-08-19 过滤后剩余 40572 行数据
2025-08-19 23:10:01,956 - INFO - 最终返回数据: 40572 行, 301 只股票
2025-08-19 23:10:01,959 - INFO - 成功获取股票数据，共40572条记录
2025-08-19 23:10:01,959 - INFO - 开始执行第一步：适度过滤明显不符合条件的股票
2025-08-19 23:10:03,047 - INFO - 过滤后剩余股票数量: 239/301
2025-08-19 23:10:03,049 - INFO - 开始执行第二步：对通过过滤的股票进行评分
2025-08-19 23:10:03,088 - INFO - 股票000792处于超卖区域，RSI: 21.8140068886338, 威廉指标: -40.08438818565393，降低评分
2025-08-19 23:10:03,099 - INFO - 股票000893处于超卖区域，RSI: 39.43894389438943, 威廉指标: -93.34916864608076，降低评分
2025-08-19 23:10:03,145 - INFO - 股票002266处于超卖区域，RSI: 20.253164556961963, 威廉指标: -72.34042553191514，降低评分
2025-08-19 23:10:03,212 - INFO - 股票002831处于超卖区域，RSI: 14.598540145985552, 威廉指标: -50.15576323987536，降低评分
2025-08-19 23:10:03,223 - INFO - 股票002867处于超卖区域，RSI: 17.499999999999403, 威廉指标: -84.7058823529409，降低评分
2025-08-19 23:10:03,305 - INFO - 股票300146处于超卖区域，RSI: 19.17808219178086, 威廉指标: -58.33333333333338，降低评分
2025-08-19 23:10:03,409 - INFO - 股票300498处于超卖区域，RSI: 23.364485981308746, 威廉指标: -87.38738738738732，降低评分
2025-08-19 23:10:03,499 - INFO - 股票300765处于超卖区域，RSI: 40.474663245670286, 威廉指标: -96.8809073724008，降低评分
2025-08-19 23:10:03,530 - INFO - 股票300896处于超卖区域，RSI: 20.325865580448095, 威廉指标: -80.45112781954877，降低评分
2025-08-19 23:10:03,588 - INFO - 股票600011处于超卖区域，RSI: 15.789473684211018, 威廉指标: -83.01886792452831，降低评分
2025-08-19 23:10:03,602 - INFO - 股票600089处于超卖区域，RSI: 24.74724611438066, 威廉指标: -76.93318318318329，降低评分
2025-08-19 23:10:03,676 - INFO - 股票600938处于超卖区域，RSI: 25.352112676056265, 威廉指标: -100.0，降低评分
2025-08-19 23:10:03,707 - INFO - 股票601919处于超卖区域，RSI: 0.0, 威廉指标: -98.90109890109872，降低评分
2025-08-19 23:10:03,740 - INFO - 股票603259处于超卖区域，RSI: 46.94697375468666, 威廉指标: -90.5792488860598，降低评分
2025-08-19 23:10:03,886 - INFO - 
    === 选股分析报告 ===
    股票总数: 239
    平均MA60角度: 63.85°
    平均偏离度: 2.09%
    平均10日涨幅: 6.79%
    
    仓位配置建议:
    强势区股票(99只): 建议配置60%资金
    中性区股票(90只): 建议配置30%资金
    弱势区股票(50只): 建议保留10%现金
    
    评分分布:
    score
10.0      2
20.0      7
22.5      2
25.0      3
30.0      3
35.0      1
40.0     25
45.0      7
50.0     19
55.0      8
60.0     18
65.0     21
70.0     24
75.0     19
80.0     35
85.0     17
90.0     25
100.0     3
    
    前10名股票:
    symbol  score  close     ma5  ma60_angle  ma200_angle      rsi6  deviation  ma5_slope  ma200_slope  pct_10d  low_10d
300633  100.0  35.50  35.194   56.571183    49.563213 62.655602   0.008695   0.003319     0.000580 0.056862    32.90
003031  100.0 157.70 157.550   79.393545    65.686067 57.949480   0.000952   0.001930     0.001083 0.020052   151.99
300919  100.0  51.93  51.506   68.104986    19.704969 56.701031   0.008232   0.002563     0.000178 0.037977    49.65
300957   90.0  48.97  48.490   63.357757    32.826775 55.442177   0.009899  -0.000214     0.000320 0.004925    47.43
300567   90.0 191.67 190.740   -5.069680   -23.867732 67.600000   0.004876   0.005335    -0.000222 0.051168   180.27
002312   90.0 214.93 213.106   31.974721   -32.832061 51.428571   0.008559   0.000107    -0.000325 0.008020   210.56
605111   90.0 135.22 134.632   62.176437    18.521392 64.280652   0.004367   0.004427     0.000167 0.060216   126.58
688005   90.0  35.04  34.900   76.749017    29.823304 46.703297   0.004011   0.001249     0.000285 0.058291    32.87
300866   90.0 193.95 192.212   85.020172    75.982757 65.458937   0.009042   0.008056     0.001926 0.147429   167.57
300001   90.0 160.19 158.656    4.549559   -12.474369 66.494401   0.009669   0.003260    -0.000111 0.022794   153.06
    
2025-08-19 23:10:03,887 - INFO - 详细选股报告已保存至: ./data/selection_report.txt
2025-08-19 23:10:03,887 - INFO - 选股完成，共选出15只股票
2025-08-19 23:10:03,888 - INFO - 最终选股结果:
     symbol  score  stop_loss
115  300633  100.0      32.90
50   003031  100.0     151.99
138  300919  100.0      49.65
139  300957   90.0      47.43
106  300567   90.0     180.27
28   002312   90.0     210.56
211  605111   90.0     126.58
213  688005   90.0      32.87
136  300866   90.0     167.57
51   300001   90.0     153.06
53   300003   90.0      73.98
21   002155   90.0      63.35
57   300015   90.0     805.94
194  603179   90.0     109.80
17   001389   90.0      62.03
2025-08-19 23:10:03,893 - INFO - 选股结果已保存到: ./data/selected_stocks.csv
2025-08-19 23:35:25,926 - INFO - ========== 策略回测开始 ==========
2025-08-19 23:35:25,926 - INFO - 开始PyBroker回测...
2025-08-19 23:35:25,926 - INFO - 计算调仓日期...
2025-08-19 23:35:25,930 - INFO - 共157个调仓日，前5个调仓日: [datetime.date(2022, 8, 22), datetime.date(2022, 8, 29), datetime.date(2022, 9, 5), datetime.date(2022, 9, 12), datetime.date(2022, 9, 19)]
2025-08-19 23:35:25,930 - INFO - 创建策略对象...
2025-08-19 23:35:25,932 - INFO - 获取所有股票代码...
2025-08-19 23:35:25,939 - INFO - 从constituents_cache目录获取到477只股票
2025-08-19 23:35:25,939 - INFO - 总共有477只股票，前10只: ['300568', '002978', '601825', '300573', '601198', '603707', '300761', '600016', '002463', '601006']
2025-08-19 23:35:25,939 - INFO - 添加执行逻辑...
2025-08-19 23:35:25,939 - INFO - 设置滑点模型...
2025-08-19 23:35:25,939 - ERROR - 回测执行出错: 'Strategy' object has no attribute 'session'
2025-08-19 23:35:25,939 - ERROR - Traceback (most recent call last):
  File "/Users/luojiutian/Documents/python/动态市现率/pybroker_backtest.py", line 356, in run_backtest
    strategy.session['rebalance_dates'] = rebalance_dates # type: ignore
AttributeError: 'Strategy' object has no attribute 'session'

2025-08-19 23:35:25,939 - ERROR - 回测执行失败，无结果可分析
2025-08-19 23:35:25,939 - INFO - ========== 回测完成 ==========
2025-08-19 23:35:35,950 - INFO - ========== 策略回测开始 ==========
2025-08-19 23:35:35,950 - INFO - 开始PyBroker回测...
2025-08-19 23:35:35,950 - INFO - 计算调仓日期...
2025-08-19 23:35:35,953 - INFO - 共157个调仓日，前5个调仓日: [datetime.date(2022, 8, 22), datetime.date(2022, 8, 29), datetime.date(2022, 9, 5), datetime.date(2022, 9, 12), datetime.date(2022, 9, 19)]
2025-08-19 23:35:35,953 - INFO - 创建策略对象...
2025-08-19 23:35:35,954 - INFO - 获取所有股票代码...
2025-08-19 23:35:35,958 - INFO - 从constituents_cache目录获取到477只股票
2025-08-19 23:35:35,958 - INFO - 总共有477只股票，前10只: ['300383', '000425', '002625', '300679', '001965', '600104', '300012', '600123', '002460', '603688']
2025-08-19 23:35:35,958 - INFO - 添加执行逻辑...
2025-08-19 23:35:35,958 - INFO - 设置滑点模型...
2025-08-19 23:35:35,958 - ERROR - 回测执行出错: 'Strategy' object has no attribute 'session'
2025-08-19 23:35:35,959 - ERROR - Traceback (most recent call last):
  File "/Users/luojiutian/Documents/python/动态市现率/pybroker_backtest.py", line 356, in run_backtest
    strategy.session['rebalance_dates'] = rebalance_dates # type: ignore
AttributeError: 'Strategy' object has no attribute 'session'

2025-08-19 23:35:35,959 - ERROR - 回测执行失败，无结果可分析
2025-08-19 23:35:35,959 - INFO - ========== 回测完成 ==========
